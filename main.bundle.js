(self.webpackChunkpikachu_volleyball=self.webpackChunkpikachu_volleyball||[]).push([[792],{213:function(e,t,s){var n,d;void 0===(d="function"==typeof(n=function(){"use strict";function t(e,t,s){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){c(n.response,t,s)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function d(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(s){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof s.g&&s.g.global===s.g?s.g:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,s,o){var c=i.URL||i.webkitURL,a=document.createElement("a");s=s||e.name||"download",a.download=s,a.rel="noopener","string"==typeof e?(a.href=e,a.origin===location.origin?d(a):n(a.href)?t(e,s,o):d(a,a.target="_blank")):(a.href=c.createObjectURL(e),setTimeout((function(){c.revokeObjectURL(a.href)}),4e4),setTimeout((function(){d(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,s,i){if(s=s||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),s);else if(n(e))t(e,s,i);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){d(o)}))}}:function(e,s,n,d){if((d=d||open("","_blank"))&&(d.document.title=d.document.body.innerText="downloading..."),"string"==typeof e)return t(e,s,n);var c="application/octet-stream"===e.type,a=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||c&&a||o)&&"undefined"!=typeof FileReader){var r=new FileReader;r.onloadend=function(){var e=r.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=e:location=e,d=null},r.readAsDataURL(e)}else{var m=i.URL||i.webkitURL,u=m.createObjectURL(e);d?d.location=u:location.href=u,d=null,setTimeout((function(){m.revokeObjectURL(u)}),4e4)}});i.saveAs=c.saveAs=c,e.exports=c})?n.apply(t,[]):n)||(e.exports=d)},495:(e,t,s)=>{"use strict";var n=s(603),d=s(787),i=s(284),o=s(650),c=s(449),a=s(561),l=s(49),r=s(401),m=s(77),u=s(697),b=s(505),g=(s(229),s(579)),p=s(17),v=s(751),f=s(213),h=s(212),E=s(970),L=s(805);const y=new class{constructor(){this.frameCounter=0,this.roomID="",this.nicknames=["",""],this.partialPublicIPs=["",""],this.inputs=[],this.options=[[0,{speed:"fast",winningScore:15}]],this.chats=[]}recordRoomID(e){this.roomID=e}recordNicknames(e,t){this.nicknames[0]=e,this.nicknames[1]=t}recordPartialPublicIPs(e,t){this.partialPublicIPs[0]=e,this.partialPublicIPs[1]=t}recordInputs(e,t){const s=((0,L.H)(e)<<5)+(0,L.H)(t);this.inputs.push(s),this.frameCounter++}cleanRecord(){this.inputs=[],this.frameCounter=0}recordOptions(e){this.options.push([this.frameCounter,e])}recordChats(e,t){this.chats.push([this.frameCounter,t,e])}saveAsFile(){const e={version:"p2p-online",roomID:this.roomID,nicknames:this.nicknames,partialPublicIPs:this.partialPublicIPs,chats:this.chats,options:this.options,inputs:this.inputs,hash:0},t=(0,E.i)((0,h.l)(e));e.hash=t;const s={_comment:"Replay Viewer at: https://gorisanson.github.io/pikachu-volleyball-p2p-online/en/replay/",pack:e},n=new Blob([JSON.stringify(s)],{type:"text/plain;charset=utf-8"}),d=new Date,i=`${d.getFullYear()}${("0"+(d.getMonth()+1)).slice(-2)}${("0"+d.getDate()).slice(-2)}_${("0"+d.getHours()).slice(-2)}${("0"+d.getMinutes()).slice(-2)}_${this.nicknames[0]}_${this.partialPublicIPs[0].replace(".*.*","")}_vs_${this.nicknames[1]}_${this.partialPublicIPs[1].replace(".*.*","")}.txt`.replace(/[/\\?%*:|"<>]/g,"_");(0,f.saveAs)(n,i,{autoBom:!0})}},w={_precedence:0,pause:function(e,t){t>this._precedence&&(e.paused=!0,this._precedence=t)},resume:function(e,t){t===this._precedence&&(e.paused=!1,this._precedence=0)}};function I(e){if(e.graphic){const t=document.getElementById("graphic-sharp-btn"),s=document.getElementById("graphic-soft-btn");switch(e.graphic){case"sharp":s.classList.remove("selected"),t.classList.add("selected");break;case"soft":t.classList.remove("selected"),s.classList.add("selected")}}if(e.bgm){const t=document.getElementById("bgm-on-btn"),s=document.getElementById("bgm-off-btn");switch(e.bgm){case"on":s.classList.remove("selected"),t.classList.add("selected");break;case"off":t.classList.remove("selected"),s.classList.add("selected")}}if(e.sfx){const t=document.getElementById("stereo-btn"),s=document.getElementById("mono-btn"),n=document.getElementById("sfx-off-btn");switch(e.sfx){case"stereo":s.classList.remove("selected"),n.classList.remove("selected"),t.classList.add("selected");break;case"mono":n.classList.remove("selected"),t.classList.remove("selected"),s.classList.add("selected");break;case"off":t.classList.remove("selected"),s.classList.remove("selected"),n.classList.add("selected")}}if(e.speed){const t=document.getElementById("slow-speed-btn"),s=document.getElementById("medium-speed-btn"),n=document.getElementById("fast-speed-btn");switch(e.speed){case"slow":s.classList.remove("selected"),n.classList.remove("selected"),t.classList.add("selected");break;case"medium":n.classList.remove("selected"),t.classList.remove("selected"),s.classList.add("selected");break;case"fast":t.classList.remove("selected"),s.classList.remove("selected"),n.classList.add("selected")}}if(e.winningScore){const t=document.getElementById("winning-score-5-btn"),s=document.getElementById("winning-score-10-btn"),n=document.getElementById("winning-score-15-btn");switch(e.winningScore){case"5":s.classList.remove("selected"),n.classList.remove("selected"),t.classList.add("selected");break;case"10":n.classList.remove("selected"),t.classList.remove("selected"),s.classList.add("selected");break;case"15":t.classList.remove("selected"),s.classList.remove("selected"),n.classList.add("selected")}}}function B(e,t){x(),S(e),document.getElementById(e).classList.toggle("show")?w.pause(t,1):w.resume(t,1)}function k(e,t){x(),document.getElementById(e).classList.add("open"),document.getElementById(t).classList.add("show")}function S(e){const t=document.getElementsByClassName("dropdown");for(let s=0;s<t.length;s++)t[s].id!==e&&t[s].classList.remove("show")}function x(){const e=document.getElementsByClassName("submenu");for(let t=0;t<e.length;t++)e[t].classList.remove("show");const t=document.getElementsByClassName("submenu-btn");for(let e=0;e<t.length;e++)t[e].classList.remove("open")}i.A4.registerPlugin("prepare",o.p8),i.A4.registerPlugin("batch",i.ch),m.KB.registerPlugin("prepare",b.S),m.KB.registerPlugin("sprite",u.$),a.aH.registerPlugin(l.A),n.W.RESOLUTION=2,n.W.SCALE_MODE=d.M6.NEAREST,n.W.ROUND_PIXELS=!0;const P=(0,i.q5)({width:432,height:304,antialias:!1,backgroundColor:0,backgroundAlpha:1,forceCanvas:!0}),C=new c.mc,U=new r.Rv,A=new a.aH;P.view.setAttribute("id","game-canvas"),document.getElementById("game-canvas-container").appendChild(P.view),P.render(C),A.add(p.I.SPRITE_SHEET);for(const e in p.I.SOUNDS)A.add(p.I.SOUNDS[e]);function R(){const e=new g.q(C,A.resources);(function(e,t){const s=s=>{switch(I(s),s.graphic){case"sharp":document.getElementById("game-canvas").classList.remove("graphic-soft");break;case"soft":document.getElementById("game-canvas").classList.add("graphic-soft")}switch(s.bgm){case"on":e.audio.turnBGMVolume(!0);break;case"off":e.audio.turnBGMVolume(!1)}switch(s.sfx){case"stereo":e.audio.turnSFXVolume(!0),e.isStereoSound=!0;break;case"mono":e.audio.turnSFXVolume(!0),e.isStereoSound=!1;break;case"off":e.audio.turnSFXVolume(!1)}switch(s.speed){case"slow":e.normalFPS=20,t.maxFPS=e.normalFPS;break;case"medium":e.normalFPS=25,t.maxFPS=e.normalFPS;break;case"fast":e.normalFPS=30,t.maxFPS=e.normalFPS}switch(s.winningScore){case"5":e.winningScore=5;break;case"10":e.winningScore=10;break;case"15":e.winningScore=15}};document.getElementById("save-replay-btn").addEventListener("click",(()=>{y.saveAsFile()})),s({graphic:v.U.get("pv-offline-graphic"),bgm:v.U.get("pv-offline-bgm"),sfx:v.U.get("pv-offline-sfx"),speed:v.U.get("pv-offline-speed"),winningScore:v.U.get("pv-offline-winningScore")}),function(e,t){const s=document.getElementById("game-dropdown-btn"),n=document.getElementById("options-dropdown-btn"),d=document.getElementById("about-btn");document.getElementById("code-copy-btn").addEventListener("click",(()=>{var e;e=document.getElementById("code-viewer-output").textContent,navigator.clipboard.writeText(e).then((()=>{alert("복사되었습니다. 원하는 곳에 붙여넣기하여 주세요.")})).catch((()=>{prompt("키보드의 ctrl+C 또는 마우스 오른쪽의 복사하기를 이용해주세요.",e)}))})),s.disabled=!1,n.disabled=!1,d.disabled=!1;const i=document.getElementById("pause-btn");i.addEventListener("click",(()=>{i.classList.contains("selected")?(i.classList.remove("selected"),w.resume(e,3)):(i.classList.add("selected"),w.pause(e,3))})),document.getElementById("restart-btn").addEventListener("click",(()=>{i.classList.contains("selected")&&(i.classList.remove("selected"),w.resume(e,3)),e.restart()}));const o=document.getElementById("graphic-sharp-btn"),c=document.getElementById("graphic-soft-btn");o.addEventListener("click",(()=>{t({graphic:"sharp"})})),c.addEventListener("click",(()=>{t({graphic:"soft"})}));const a=document.getElementById("bgm-on-btn"),l=document.getElementById("bgm-off-btn");a.addEventListener("click",(()=>{t({bgm:"on"})})),l.addEventListener("click",(()=>{t({bgm:"off"})}));const r=document.getElementById("stereo-btn"),m=document.getElementById("mono-btn"),u=document.getElementById("sfx-off-btn");r.addEventListener("click",(()=>{t({sfx:"stereo"})})),m.addEventListener("click",(()=>{t({sfx:"mono"})})),u.addEventListener("click",(()=>{t({sfx:"off"})}));const b=document.getElementById("slow-speed-btn"),g=document.getElementById("medium-speed-btn"),p=document.getElementById("fast-speed-btn");b.addEventListener("click",(()=>{t({speed:"slow"})})),g.addEventListener("click",(()=>{t({speed:"medium"})})),p.addEventListener("click",(()=>{t({speed:"fast"})}));const v=document.getElementById("winning-score-5-btn"),f=document.getElementById("winning-score-10-btn"),h=document.getElementById("winning-score-15-btn"),E=document.getElementById("notice-box-1"),L=document.getElementById("notice-ok-btn-1"),y=document.getElementById("winning-score-in-notice-box-1");function I(t){return!(e.state!==e.round&&e.state!==e.afterEndOfRound&&e.state!==e.beforeStartOfNextRound||!(e.scores[0]>=t||e.scores[1]>=t))}const B=document.getElementById("notice-box-2"),k=document.getElementById("notice-ok-btn-2");v.addEventListener("click",(()=>{if(!v.classList.contains("selected"))return!0===e.isPracticeMode?(B.classList.remove("hidden"),s.disabled=!0,n.disabled=!0,d.disabled=!0,void w.pause(e,2)):I(5)?(y.textContent="5",E.classList.remove("hidden"),s.disabled=!0,n.disabled=!0,d.disabled=!0,void w.pause(e,2)):void t({winningScore:"5"})})),f.addEventListener("click",(()=>{if(!f.classList.contains("selected"))return!0===e.isPracticeMode?(B.classList.remove("hidden"),s.disabled=!0,n.disabled=!0,d.disabled=!0,void w.pause(e,2)):I(10)?(y.textContent="10",E.classList.remove("hidden"),s.disabled=!0,n.disabled=!0,d.disabled=!0,void w.pause(e,2)):void t({winningScore:"10"})})),h.addEventListener("click",(()=>{if(!h.classList.contains("selected"))return!0===e.isPracticeMode?(B.classList.remove("hidden"),s.disabled=!0,n.disabled=!0,d.disabled=!0,void w.pause(e,2)):I(15)?(y.textContent="15",E.classList.remove("hidden"),s.disabled=!0,n.disabled=!0,d.disabled=!0,void w.pause(e,2)):void t({winningScore:"15"})})),L.addEventListener("click",(()=>{E.classList.contains("hidden")||(E.classList.add("hidden"),s.disabled=!1,n.disabled=!1,d.disabled=!1,w.resume(e,2))})),k.addEventListener("click",(()=>{B.classList.contains("hidden")||(B.classList.add("hidden"),s.disabled=!1,n.disabled=!1,d.disabled=!1,w.resume(e,2))}));const S=document.getElementById("practice-mode-on-btn"),x=document.getElementById("practice-mode-off-btn");S.addEventListener("click",(()=>{x.classList.remove("selected"),S.classList.add("selected"),e.isPracticeMode=!0})),x.addEventListener("click",(()=>{S.classList.remove("selected"),x.classList.add("selected"),e.isPracticeMode=!1}));const P=document.getElementById("about-box"),C=document.getElementById("close-about-btn");d.addEventListener("click",(()=>{P.classList.contains("hidden")?(P.classList.remove("hidden"),s.disabled=!0,n.disabled=!0,w.pause(e,2)):(P.classList.add("hidden"),s.disabled=!1,n.disabled=!1,w.resume(e,2))})),C.addEventListener("click",(()=>{P.classList.contains("hidden")||(P.classList.add("hidden"),s.disabled=!1,n.disabled=!1,w.resume(e,2))})),document.getElementById("reset-to-default-btn").addEventListener("click",(()=>{x.click(),t({graphic:"sharp",bgm:"on",sfx:"stereo",speed:"medium",winningScore:"15"})}))}(e,(e=>{s(e),(e=>{I(e),e.graphic&&v.U.set("pv-offline-graphic",e.graphic),e.bgm&&v.U.set("pv-offline-bgm",e.bgm),e.sfx&&v.U.set("pv-offline-sfx",e.sfx),e.speed&&v.U.set("pv-offline-speed",e.speed),e.winningScore&&v.U.set("pv-offline-winningScore",e.winningScore)})(e)})),function(e){window.addEventListener("click",(t=>{t.target.matches(".dropdown-btn, .submenu-btn")||(x(),S(""),w.resume(e,1))})),document.getElementById("game-dropdown-btn").addEventListener("click",(()=>{B("game-dropdown",e)})),document.getElementById("options-dropdown-btn").addEventListener("click",(()=>{B("options-dropdown",e)})),document.getElementById("graphic-submenu-btn").addEventListener("mouseover",(()=>{k("graphic-submenu-btn","graphic-submenu")})),document.getElementById("bgm-submenu-btn").addEventListener("mouseover",(()=>{k("bgm-submenu-btn","bgm-submenu")})),document.getElementById("sfx-submenu-btn").addEventListener("mouseover",(()=>{k("sfx-submenu-btn","sfx-submenu")})),document.getElementById("speed-submenu-btn").addEventListener("mouseover",(()=>{k("speed-submenu-btn","speed-submenu")})),document.getElementById("winning-score-submenu-btn").addEventListener("mouseover",(()=>{k("winning-score-submenu-btn","winning-score-submenu")})),document.getElementById("practice-mode-submenu-btn").addEventListener("mouseover",(()=>{k("practice-mode-submenu-btn","practice-mode-submenu")})),document.getElementById("reset-to-default-btn").addEventListener("mouseover",(()=>{x()})),document.getElementById("bgm-submenu-btn").addEventListener("click",(()=>{k("bgm-submenu-btn","bgm-submenu")})),document.getElementById("sfx-submenu-btn").addEventListener("click",(()=>{k("sfx-submenu-btn","sfx-submenu")})),document.getElementById("speed-submenu-btn").addEventListener("click",(()=>{k("speed-submenu-btn","speed-submenu")})),document.getElementById("winning-score-submenu-btn").addEventListener("click",(()=>{k("winning-score-submenu-btn","winning-score-submenu")})),document.getElementById("practice-mode-submenu-btn").addEventListener("click",(()=>{k("practice-mode-submenu-btn","practice-mode-submenu")})),document.getElementById("reset-to-default-btn").addEventListener("click",(()=>{x()}))}(e),window.addEventListener("keydown",(e=>{if("Escape"===e.code){const t=document.getElementById("menu-bar");t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden"),e.preventDefault()}else"Space"===e.code&&document.getElementById("about-box").classList.contains("hidden")&&e.preventDefault()})),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?e.audio.unmuteAll():e.audio.muteAll()}))})(e,U),function(e){U.maxFPS=e.normalFPS,U.add((()=>{e.gameLoop(),P.render(C)})),U.start()}(e)}!function(){const e=document.getElementById("loading-box"),t=document.getElementById("progress-bar");A.onProgress.add((()=>{t.style.width=`${A.progress}%`})),A.onComplete.add((()=>{e.classList.add("hidden")}));const s=document.getElementById("about-box"),n=document.getElementById("about-btn"),d=document.getElementById("close-about-btn"),i=document.getElementById("game-dropdown-btn"),o=document.getElementById("options-dropdown-btn");i.disabled=!0,o.disabled=!0;const c=()=>{s.classList.contains("hidden")||(s.classList.add("hidden"),n.disabled=!0),n.getElementsByClassName("text-play")[0].classList.add("hidden"),n.getElementsByClassName("text-about")[0].classList.remove("hidden"),n.classList.remove("glow"),d.getElementsByClassName("text-play")[0].classList.add("hidden"),d.getElementsByClassName("text-close")[0].classList.remove("hidden"),d.classList.remove("glow"),A.load(R),e.classList.remove("hidden"),n.removeEventListener("click",c),d.removeEventListener("click",c)};n.addEventListener("click",c),d.addEventListener("click",c)}()},751:(e,t,s)=>{"use strict";s.d(t,{U:()=>n});const n={get:e=>{let t=null;try{t=localStorage.getItem(e)}catch(e){console.error(e)}return t},set:(e,t)=>{try{localStorage.setItem(e,t)}catch(e){console.error(e)}}}}},e=>{e.O(0,[27,483],(()=>e(e.s=495))),e.O()}]);
//# sourceMappingURL=main.bundle.js.map