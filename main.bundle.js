"use strict";(self.webpackChunkpikachu_volleyball=self.webpackChunkpikachu_volleyball||[]).push([[792],{450:(e,t,i)=>{var s=i(603),n=i(787),o=i(592),r=i(650),a=i(449),c=i(561),l=i(49),u=i(401),h=i(77),d=i(697),m=i(505),f=(i(229),null);function y(){return null===f?Math.floor(32768*Math.random()):Math.floor(32768*f())}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,w(s.key),s)}}function g(e,t,i){return t&&v(e.prototype,t),i&&v(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var E=432,k=216,x=244,L=252,S=function(){return g((function e(t,i){b(this,e),this.player1=new P(!1,t),this.player2=new P(!0,i),this.ball=new I(!1)}),[{key:"runEngineForNextFrame",value:function(e){var t=function(e,t,i,s){for(var n,o,r=function(e){e.previousPreviousX=e.previousX,e.previousPreviousY=e.previousY,e.previousX=e.x,e.previousY=e.y;var t=e.fineRotation+(e.xVelocity/2|0);t<0?t+=50:t>50&&(t+=-50),e.fineRotation=t,e.rotation=e.fineRotation/10|0;var i=e.x+e.xVelocity;(i<20||i>E)&&(e.xVelocity=-e.xVelocity);var s=e.y+e.yVelocity;return s<0&&(e.yVelocity=1),Math.abs(e.x-k)<25&&e.y>176&&(e.y<=192?e.yVelocity>0&&(e.yVelocity=-e.yVelocity):e.x<k?e.xVelocity=-Math.abs(e.xVelocity):e.xVelocity=Math.abs(e.xVelocity)),(s=e.y+e.yVelocity)>L?(e.sound.ballTouchesGround=!0,e.yVelocity=-e.yVelocity,e.punchEffectX=e.x,e.y=L,e.punchEffectRadius=20,e.punchEffectY=272,!0):(e.y=s,e.x=e.x+e.xVelocity,e.yVelocity+=1,!1)}(i),a=0;a<2;a++)0===a?(n=e,o=t):(n=t,o=e),T(i),M(n,s[a],o,i);for(var c=0;c<2;c++)!0===B(i,(n=0===c?e:t).x,n.y)?!1===n.isCollisionWithBallHappened&&(A(i,n.x,s[c],n.state),n.isCollisionWithBallHappened=!0):n.isCollisionWithBallHappened=!1;return r}(this.player1,this.player2,this.ball,e);return t}}])}(),C=g((function e(){b(this,e),this.xDirection=0,this.yDirection=0,this.powerHit=0})),P=function(){return g((function e(t,i){b(this,e),this.isPlayer2=t,this.isComputer=i,this.initializeForNewRound(),this.divingDirection=0,this.lyingDownDurationLeft=-1,this.isWinner=!1,this.gameEnded=!1,this.computerWhereToStandBy=0,this.sound={pipikachu:!1,pika:!1,chu:!1}}),[{key:"initializeForNewRound",value:function(){this.x=36,this.isPlayer2&&(this.x=396),this.y=x,this.yVelocity=0,this.isCollisionWithBallHappened=!1,this.state=0,this.frameNumber=0,this.normalStatusArmSwingDirection=1,this.delayBeforeNextFrame=0,this.computerBoldness=y()%5}}])}(),I=function(){return g((function e(t){b(this,e),this.initializeForNewRound(t),this.expectedLandingPointX=0,this.rotation=0,this.fineRotation=0,this.punchEffectX=0,this.punchEffectY=0,this.previousX=0,this.previousPreviousX=0,this.previousY=0,this.previousPreviousY=0,this.sound={powerHit:!1,ballTouchesGround:!1}}),[{key:"initializeForNewRound",value:function(e){this.x=56,!0===e&&(this.x=376),this.y=0,this.xVelocity=0,this.yVelocity=1,this.punchEffectRadius=0,this.isPowerHit=!1}}])}();function B(e,t,i){var s=e.x-t;return Math.abs(s)<=32&&(s=e.y-i,Math.abs(s)<=32)}function M(e,t,i,s){if(!0===e.isComputer&&function(e,t,i,s){s.xDirection=0,s.yDirection=0,s.powerHit=0;var n=t.expectedLandingPointX;if(Math.abs(t.x-e.x)>100&&Math.abs(t.xVelocity)<e.computerBoldness+5){var o=Number(e.isPlayer2)*k;(t.expectedLandingPointX<=o||t.expectedLandingPointX>=Number(e.isPlayer2)*E+k)&&0===e.computerWhereToStandBy&&(n=o+108)}if(Math.abs(n-e.x)>e.computerBoldness+8?e.x<n?s.xDirection=1:s.xDirection=-1:y()%20==0&&(e.computerWhereToStandBy=y()%2),0===e.state){Math.abs(t.xVelocity)<e.computerBoldness+3&&Math.abs(t.x-e.x)<32&&t.y>-36&&t.y<10*e.computerBoldness+84&&t.yVelocity>0&&(s.yDirection=-1);var r=Number(e.isPlayer2)*k,a=(Number(e.isPlayer2)+1)*k;t.expectedLandingPointX>r&&t.expectedLandingPointX<a&&Math.abs(t.x-e.x)>5*e.computerBoldness+64&&t.x>r&&t.x<a&&t.y>174&&(s.powerHit=1,e.x<t.x?s.xDirection=1:s.xDirection=-1)}else if((1===e.state||2===e.state)&&(Math.abs(t.x-e.x)>8&&(e.x<t.x?s.xDirection=1:s.xDirection=-1),Math.abs(t.x-e.x)<48&&Math.abs(t.y-e.y)<48)){var c=function(e,t,i,s){if(y()%2==0)for(var n=1;n>-1;n--)for(var o=-1;o<2;o++){var r=V(n,o,t);if((r<=Number(e.isPlayer2)*k||r>=Number(e.isPlayer2)*E+k)&&Math.abs(r-i.x)>64)return s.xDirection=n,s.yDirection=o,!0}else for(var a=1;a>-1;a--)for(var c=1;c>-2;c--){var l=V(a,c,t);if((l<=Number(e.isPlayer2)*k||l>=Number(e.isPlayer2)*E+k)&&Math.abs(l-i.x)>64)return s.xDirection=a,s.yDirection=c,!0}return!1}(e,t,i,s);!0===c&&(s.powerHit=1,Math.abs(i.x-e.x)<80&&-1!==s.yDirection&&(s.yDirection=-1))}}(e,s,i,t),4===e.state)return e.lyingDownDurationLeft+=-1,void(e.lyingDownDurationLeft<-1&&(e.state=0));var n=0;e.state<5&&(n=e.state<3?6*t.xDirection:8*e.divingDirection);var o=e.x+n;e.x=o,!1===e.isPlayer2?o<32?e.x=32:o>184&&(e.x=184):o<248?e.x=248:o>400&&(e.x=400),e.state<3&&-1===t.yDirection&&e.y===x&&(e.yVelocity=-16,e.state=1,e.frameNumber=0,e.sound.chu=!0);var r=e.y+e.yVelocity;if(e.y=r,r<x?e.yVelocity+=1:r>x&&(e.yVelocity=0,e.y=x,e.frameNumber=0,3===e.state?(e.state=4,e.frameNumber=0,e.lyingDownDurationLeft=3):e.state=0),1===t.powerHit&&(1===e.state?(e.delayBeforeNextFrame=5,e.frameNumber=0,e.state=2,e.sound.pika=!0):0===e.state&&0!==t.xDirection&&(e.state=3,e.frameNumber=0,e.divingDirection=t.xDirection,e.yVelocity=-5,e.sound.chu=!0)),1===e.state)e.frameNumber=(e.frameNumber+1)%3;else if(2===e.state)e.delayBeforeNextFrame<1?(e.frameNumber+=1,e.frameNumber>4&&(e.frameNumber=0,e.state=1)):e.delayBeforeNextFrame-=1;else if(0===e.state&&(e.delayBeforeNextFrame+=1,e.delayBeforeNextFrame>3)){e.delayBeforeNextFrame=0;var a=e.frameNumber+e.normalStatusArmSwingDirection;(a<0||a>4)&&(e.normalStatusArmSwingDirection=-e.normalStatusArmSwingDirection),e.frameNumber=e.frameNumber+e.normalStatusArmSwingDirection}!0===e.gameEnded&&(0===e.state&&(!0===e.isWinner?(e.state=5,e.sound.pipikachu=!0):e.state=6,e.delayBeforeNextFrame=0,e.frameNumber=0),function(e){!0===e.gameEnded&&e.frameNumber<4&&(e.delayBeforeNextFrame+=1,e.delayBeforeNextFrame>4&&(e.delayBeforeNextFrame=0,e.frameNumber+=1))}(e))}function A(e,t,i,s){e.x<t?e.xVelocity=-(Math.abs(e.x-t)/3|0):e.x>t&&(e.xVelocity=Math.abs(e.x-t)/3|0),0===e.xVelocity&&(e.xVelocity=y()%3-1);var n=Math.abs(e.yVelocity);e.yVelocity=-n,n<15&&(e.yVelocity=-15),2===s?(e.x<k?e.xVelocity=10*(Math.abs(i.xDirection)+1):e.xVelocity=10*-(Math.abs(i.xDirection)+1),e.punchEffectX=e.x,e.punchEffectY=e.y,e.yVelocity=Math.abs(e.yVelocity)*i.yDirection*2,e.punchEffectRadius=20,e.sound.powerHit=!0,e.isPowerHit=!0):e.isPowerHit=!1,T(e)}function T(e){for(var t={x:e.x,y:e.y,xVelocity:e.xVelocity,yVelocity:e.yVelocity},i=0;;){i++;var s=t.xVelocity+t.x;if((s<20||s>E)&&(t.xVelocity=-t.xVelocity),t.y+t.yVelocity<0&&(t.yVelocity=1),Math.abs(t.x-k)<25&&t.y>176&&(t.y<192?t.yVelocity>0&&(t.yVelocity=-t.yVelocity):t.x<k?t.xVelocity=-Math.abs(t.xVelocity):t.xVelocity=Math.abs(t.xVelocity)),t.y=t.y+t.yVelocity,t.y>L||i>=1e3)break;t.x=t.x+t.xVelocity,t.yVelocity+=1}e.expectedLandingPointX=t.x}function V(e,t,i){var s={x:i.x,y:i.y,xVelocity:i.xVelocity,yVelocity:i.yVelocity};s.x<k?s.xVelocity=10*(Math.abs(e)+1):s.xVelocity=10*-(Math.abs(e)+1),s.yVelocity=Math.abs(s.yVelocity)*t*2;for(var n=0;;){n++;var o=s.x+s.xVelocity;if((o<20||o>E)&&(s.xVelocity=-s.xVelocity),s.y+s.yVelocity<0&&(s.yVelocity=1),Math.abs(s.x-k)<25&&s.y>176&&s.yVelocity>0&&(s.yVelocity=-s.yVelocity),s.y=s.y+s.yVelocity,s.y>L||n>=1e3)return s.x;s.x=s.x+s.xVelocity,s.yVelocity+=1}}var N=i(819),D=i(153);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,H(s.key),s)}}function R(e,t,i){return t&&W(e.prototype,t),i&&W(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function H(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=O(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var F=function(){return R((function e(){_(this,e),this.topLeftPointX=y()%500-68,this.topLeftPointY=y()%152,this.topLeftPointXVelocity=1+y()%2,this.sizeDiffTurnNumber=y()%11}),[{key:"sizeDiff",get:function(){return 5-Math.abs(this.sizeDiffTurnNumber-5)}},{key:"spriteTopLeftPointX",get:function(){return this.topLeftPointX-this.sizeDiff}},{key:"spriteTopLeftPointY",get:function(){return this.topLeftPointY-this.sizeDiff}},{key:"spriteWidth",get:function(){return 48+2*this.sizeDiff}},{key:"spriteHeight",get:function(){return 24+2*this.sizeDiff}}])}(),U=R((function e(){_(this,e),this.verticalCoord=0,this.verticalCoordVelocity=2,this.yCoords=[];for(var t=0;t<27;t++)this.yCoords.push(314)})),j=i(591);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Y(s.key),s)}}function z(e,t,i){return t&&X(e.prototype,t),i&&X(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y(e){var t=function(e){if("object"!=G(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=G(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}var Z=j.I.TEXTURES,q=function(){return z((function e(t){K(this,e);var i=t[j.I.SPRITE_SHEET].textures;this.mark=ee(i,Z.MARK,.5,.5),this.mark.x=216,this.mark.y=152,this.container=new a.mc,this.container.addChild(this.mark)}),[{key:"visible",get:function(){return this.container.visible},set:function(e){this.container.visible=e}},{key:"drawMark",value:function(e){var t=this.mark;0!==e?e<100?t.alpha=Math.min(1,t.alpha+.04):e>=100&&(t.alpha=Math.max(0,t.alpha-.04)):t.alpha=0}}])}(),$=function(){return z((function e(t){K(this,e);var i=t[j.I.SPRITE_SHEET].textures;this.messages={pokemon:ee(i,Z.POKEMON,0,0),pikachuVolleyball:ee(i,Z.PIKACHU_VOLLEYBALL,0,0),withWho:[ee(i,Z.WITH_COMPUTER,0,0),ee(i,Z.WITH_FRIEND,0,0)],sachisoft:ee(i,Z.SACHISOFT,0,0),fight:ee(i,Z.FIGHT,0,0)},this.sittingPikachuTilesContainer=function(e){for(var t=new a.mc,i=e[Z.SITTING_PIKACHU],s=i.width,n=i.height,o=0;o<Math.floor(304/n)+2;o++)for(var r=0;r<Math.floor(432/s)+2;r++)ie(t,new D.k(i),s*r,n*o);return t}(i),this.messages.sachisoft.x=216-this.messages.sachisoft.texture.width/2,this.messages.sachisoft.y=264,this.messages.pikachuVolleyball.x=140,this.messages.pikachuVolleyball.y=80,this.messages.pokemon.x=170,this.messages.pokemon.y=40,this.container=new a.mc,this.container.addChild(this.sittingPikachuTilesContainer),this.container.addChild(this.messages.pokemon),this.container.addChild(this.messages.pikachuVolleyball),this.container.addChild(this.messages.withWho[0]),this.container.addChild(this.messages.withWho[1]),this.container.addChild(this.messages.sachisoft),this.container.addChild(this.messages.fight),this.initializeVisibles(),this.sittingPikachuTilesDisplacement=0,this.selectedWithWho=-1,this.selectedWithWhoMessageSizeIncrement=2}),[{key:"visible",get:function(){return this.container.visible},set:function(e){this.container.visible=e,!1===e&&this.initializeVisibles()}},{key:"initializeVisibles",value:function(){for(var e in this.messages)this.messages[e].visible=!1}},{key:"drawFightMessage",value:function(e){var t=[20,22,25,27,30,27,25,22,20],i=this.messages.fight,s=i.texture.width,n=i.texture.height;if(0===e&&(i.visible=!0),e<30){var o=Math.floor(Math.floor(e*s/30)/2),r=Math.floor(Math.floor(e*n/30)/2);i.width=2*o,i.height=2*r,i.x=100-o,i.y=70-r}else{var a=(e+1)%9,c=Math.floor(Math.floor(t[a]*s/30)/2),l=Math.floor(Math.floor(t[a]*n/30)/2);i.width=2*c,i.height=2*l,i.y=70-l,i.x=100-c}}},{key:"drawSachisoft",value:function(e){0===e&&(this.messages.sachisoft.visible=!0,this.messages.sachisoft.alpha=0),this.messages.sachisoft.alpha=Math.min(1,this.messages.sachisoft.alpha+.04),e>70&&(this.messages.sachisoft.alpha=1)}},{key:"drawSittingPikachuTiles",value:function(e){0===e&&(this.sittingPikachuTilesContainer.visible=!0,this.sittingPikachuTilesContainer.alpha=0);var t=this.sittingPikachuTilesContainer.getChildAt(0).texture.height;this.sittingPikachuTilesDisplacement=(this.sittingPikachuTilesDisplacement+2)%t,this.sittingPikachuTilesContainer.x=-this.sittingPikachuTilesDisplacement,this.sittingPikachuTilesContainer.y=-this.sittingPikachuTilesDisplacement,e>30&&(this.sittingPikachuTilesContainer.alpha=Math.min(1,this.sittingPikachuTilesContainer.alpha+.04)),e>70&&(this.sittingPikachuTilesContainer.alpha=1)}},{key:"drawPikachuVolleyballMessage",value:function(e){if(0!==e)if(e>30&&(this.messages.pikachuVolleyball.visible=!0),e>30&&e<=44){var t=195-15*(e-30);this.messages.pikachuVolleyball.x=140+t}else e>44&&e<=55?(this.messages.pikachuVolleyball.x=140,this.messages.pikachuVolleyball.width=200-15*(e-44)):e>55&&e<=71?(this.messages.pikachuVolleyball.x=140,this.messages.pikachuVolleyball.width=40+15*(e-55)):e>71&&(this.messages.pikachuVolleyball.x=140,this.messages.pikachuVolleyball.width=this.messages.pikachuVolleyball.texture.width);else this.messages.pikachuVolleyball.visible=!1}},{key:"drawPokemonMessage",value:function(e){0!==e?e>71&&(this.messages.pokemon.visible=!0):this.messages.pokemon.visible=!1}},{key:"drawWithWhoMessages",value:function(e){var t=this.messages.withWho,i=t[0].texture.width,s=t[0].texture.height;if(0!==e){if(e>70){this.selectedWithWhoMessageSizeIncrement<10&&(this.selectedWithWhoMessageSizeIncrement+=1);for(var n=0;n<2;n++){var o=Number(this.selectedWithWho===n),r=o*(this.selectedWithWhoMessageSizeIncrement+2),a=o*this.selectedWithWhoMessageSizeIncrement;t[n].visible=!0,t[n].x=216-i/2-r,t[n].y=184+30*n-a,t[n].width=i+2*r,t[n].height=s+2*a}}}else for(var c=0;c<2;c++)t[c].visible=!1}},{key:"selectWithWho",value:function(e){this.selectedWithWho=e,this.selectedWithWhoMessageSizeIncrement=2}}])}(),J=function(){return z((function e(t){K(this,e);var i=t[j.I.SPRITE_SHEET].textures;this.bgContainer=function(e){for(var t=new a.mc,i=e[Z.SKY_BLUE],s=0;s<12;s++)for(var n=0;n<27;n++)ie(t,new D.k(i),16*n,16*s);i=e[Z.MOUNTAIN],ie(t,new D.k(i),0,188),i=e[Z.GROUND_RED];for(var o=0;o<27;o++)ie(t,new D.k(i),16*o,248);i=e[Z.GROUND_LINE];for(var r=1;r<26;r++)ie(t,new D.k(i),16*r,264);i=e[Z.GROUND_LINE_LEFT_MOST],ie(t,new D.k(i),0,264),i=e[Z.GROUND_LINE_RIGHT_MOST],ie(t,new D.k(i),416,264),i=e[Z.GROUND_YELLOW];for(var c=0;c<2;c++)for(var l=0;l<27;l++)ie(t,new D.k(i),16*l,280+16*c);i=e[Z.NET_PILLAR_TOP],ie(t,new D.k(i),213,176),i=e[Z.NET_PILLAR];for(var u=0;u<12;u++)ie(t,new D.k(i),213,184+8*u);return t}(i);var s=function(e){for(var t=function(t,i){return e[Z.PIKACHU(t,i)]},i=[],s=0;s<7;s++)if(3===s)i.push(t(s,0)),i.push(t(s,1));else if(4===s)i.push(t(s,0));else for(var n=0;n<5;n++)i.push(t(s,n));var o=new N.D(i,!1),r=new N.D(i,!1);return o.anchor.x=.5,o.anchor.y=.5,r.anchor.x=.5,r.anchor.y=.5,[o,r]}(i);this.player1=s[0],this.player2=s[1],this.ball=function(e){var t=function(t){return e[Z.BALL(t)]},i=[t(0),t(1),t(2),t(3),t(4),t("hyper")],s=new N.D(i,!1);return s.anchor.x=.5,s.anchor.y=.5,s}(i),this.ballHyper=ee(i,Z.BALL_HYPER,.5,.5),this.ballTrail=ee(i,Z.BALL_TRAIL,.5,.5),this.punch=ee(i,Z.BALL_PUNCH,.5,.5),this.scoreBoards=[te(i),te(i)],this.shadows={forPlayer1:ee(i,Z.SHADOW,.5,.5),forPlayer2:ee(i,Z.SHADOW,.5,.5),forBall:ee(i,Z.SHADOW,.5,.5)},this.messages={gameStart:ee(i,Z.GAME_START,0,0),ready:ee(i,Z.READY,0,0),gameEnd:ee(i,Z.GAME_END,0,0)},this.cloudContainer=function(e){for(var t=new a.mc,i=e[Z.CLOUD],s=0;s<10;s++){var n=new D.k(i);n.anchor.x=0,n.anchor.y=0,t.addChild(n)}return t}(i),this.waveContainer=function(e){for(var t=new a.mc,i=e[Z.WAVE],s=0;s<27;s++)ie(t,new D.k(i),16*s,0);return t}(i),this.container=new a.mc,this.container.addChild(this.bgContainer),this.container.addChild(this.cloudContainer),this.container.addChild(this.waveContainer),this.container.addChild(this.shadows.forPlayer1),this.container.addChild(this.shadows.forPlayer2),this.container.addChild(this.shadows.forBall),this.container.addChild(this.player1),this.container.addChild(this.player2),this.container.addChild(this.ballTrail),this.container.addChild(this.ballHyper),this.container.addChild(this.ball),this.container.addChild(this.punch),this.container.addChild(this.scoreBoards[0]),this.container.addChild(this.scoreBoards[1]),this.container.addChild(this.messages.gameStart),this.container.addChild(this.messages.ready),this.container.addChild(this.messages.gameEnd),this.bgContainer.x=0,this.bgContainer.y=0,this.cloudContainer.x=0,this.cloudContainer.y=0,this.waveContainer.x=0,this.waveContainer.y=0,this.messages.ready.x=176,this.messages.ready.y=38,this.scoreBoards[0].x=14,this.scoreBoards[0].y=10,this.scoreBoards[1].x=354,this.scoreBoards[1].y=10,this.shadows.forPlayer1.y=273,this.shadows.forPlayer2.y=273,this.shadows.forBall.y=273,this.initializeVisibles(),this.cloudArray=[];for(var n=0;n<10;n++)this.cloudArray.push(new F);this.wave=new U}),[{key:"visible",get:function(){return this.container.visible},set:function(e){this.container.visible=e,!1===e&&this.initializeVisibles()}},{key:"initializeVisibles",value:function(){for(var e in this.messages)this.messages[e].visible=!1}},{key:"drawPlayersAndBall",value:function(e){var t=e.player1,i=e.player2,s=e.ball;this.player1.x=t.x,this.player1.y=t.y,3===t.state||4===t.state?this.player1.scale.x=-1===t.divingDirection?-1:1:this.player1.scale.x=1,this.shadows.forPlayer1.x=t.x,this.player2.x=i.x,this.player2.y=i.y,3===i.state||4===i.state?this.player2.scale.x=1===i.divingDirection?1:-1:this.player2.scale.x=-1,this.shadows.forPlayer2.x=i.x;var n=se(t.state,t.frameNumber),o=se(i.state,i.frameNumber);this.player1.gotoAndStop(n),this.player2.gotoAndStop(o),this.ball.x=s.x,this.ball.y=s.y,this.shadows.forBall.x=s.x,this.ball.gotoAndStop(s.rotation),s.punchEffectRadius>0?(s.punchEffectRadius-=2,this.punch.width=2*s.punchEffectRadius,this.punch.height=2*s.punchEffectRadius,this.punch.x=s.punchEffectX,this.punch.y=s.punchEffectY,this.punch.visible=!0):this.punch.visible=!1,!0===s.isPowerHit?(this.ballHyper.x=s.previousX,this.ballHyper.y=s.previousY,this.ballTrail.x=s.previousPreviousX,this.ballTrail.y=s.previousPreviousY,this.ballHyper.visible=!0,this.ballTrail.visible=!0):(this.ballHyper.visible=!1,this.ballTrail.visible=!1)}},{key:"drawScoresToScoreBoards",value:function(e){for(var t=0;t<2;t++){var i=this.scoreBoards[t],s=e[t],n=i.getChildAt(0),o=i.getChildAt(1);n.gotoAndStop(s%10),o.gotoAndStop(Math.floor(s/10)%10),o.visible=s>=10}}},{key:"drawCloudsAndWave",value:function(){var e=this.cloudArray,t=this.wave;!function(e,t){for(var i=0;i<10;i++)e[i].topLeftPointX+=e[i].topLeftPointXVelocity,e[i].topLeftPointX>432&&(e[i].topLeftPointX=-68,e[i].topLeftPointY=y()%152,e[i].topLeftPointXVelocity=1+y()%2),e[i].sizeDiffTurnNumber=(e[i].sizeDiffTurnNumber+1)%11;t.verticalCoord+=t.verticalCoordVelocity,t.verticalCoord>32?(t.verticalCoord=32,t.verticalCoordVelocity=-1):t.verticalCoord<0&&t.verticalCoordVelocity<0&&(t.verticalCoordVelocity=2,t.verticalCoord=-y()%40);for(var s=0;s<27;s++)t.yCoords[s]=314-t.verticalCoord+y()%3}(e,t);for(var i=0;i<10;i++){var s=e[i],n=this.cloudContainer.getChildAt(i);n.x=s.spriteTopLeftPointX,n.y=s.spriteTopLeftPointY,n.width=s.spriteWidth,n.height=s.spriteHeight}for(var o=0;o<27;o++)this.waveContainer.getChildAt(o).y=t.yCoords[o]}},{key:"drawGameStartMessage",value:function(e,t){if(0===e)this.messages.gameStart.visible=!0;else if(e>=t-1)return void(this.messages.gameStart.visible=!1);var i=this.messages.gameStart,s=i.texture.width,n=i.texture.height,o=Math.floor(s*e/50),r=Math.floor(n*e/50);i.x=216-o,i.y=50+2*r,i.width=2*o,i.height=2*r}},{key:"drawReadyMessage",value:function(e){this.messages.ready.visible=e}},{key:"toggleReadyMessage",value:function(){this.messages.ready.visible=!this.messages.ready.visible}},{key:"drawGameEndMessage",value:function(e){var t=this.messages.gameEnd,i=t.texture.width,s=t.texture.height;if(0===e&&(t.visible=!0),e<50){var n=2*Math.floor((50-e)*i/50),o=2*Math.floor((50-e)*s/50);t.x=216-i/2-n,t.y=50-o,t.width=i+2*n,t.height=s+2*o}else t.x=216-i/2,t.y=50,t.width=i,t.height=s}}])}(),Q=function(){return z((function e(t){K(this,e);var i=t[j.I.SPRITE_SHEET].textures;this.black=ee(i,Z.BLACK,0,0),this.black.width=432,this.black.height=304,this.black.x=0,this.black.y=0,this.black.alpha=1}),[{key:"visible",get:function(){return this.black.visible},set:function(e){this.black.visible=e}},{key:"setBlackAlphaTo",value:function(e){this.black.alpha=e,0===this.black.alpha?this.black.visible=!1:this.black.visible=!0}},{key:"changeBlackAlphaBy",value:function(e){this.black.alpha=e>=0?Math.min(1,this.black.alpha+e):Math.max(0,this.black.alpha+e),0===this.black.alpha?this.black.visible=!1:this.black.visible=!0}}])}();function ee(e,t,i,s){var n=new D.k(e[t]);return n.anchor.x=i,n.anchor.y=s,n}function te(e){for(var t,i=[],s=0;s<10;s++)i.push((t=s,e[Z.NUMBER(t)]));var n=[null,null];n[0]=new N.D(i,!1),n[1]=new N.D(i,!1);var o=new a.mc;return ie(o,n[0],32,0),ie(o,n[1],0,0),o.setChildIndex(n[0],0),o.setChildIndex(n[1],1),o}function ie(e,t,i,s){e.addChild(t),t.anchor.x=0,t.anchor.y=0,t.x=i,t.y=s}function se(e,t){return e<4?5*e+t:4===e?17+t:e>4?18+5*(e-5)+t:void 0}function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ce(s.key),s)}}function ae(e,t,i){return t&&re(e.prototype,t),i&&re(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ce(e){var t=function(e){if("object"!=ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=ne(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}function le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(le=function(){return!!e})()}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}var de=function(e){function t(e,i,s,n,o){var r,a,c,l,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];return oe(this,t),(a=this,c=t,c=ue(c),r=function(e,t){if(t&&("object"==ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(a,le()?Reflect.construct(c,l||[],ue(a).constructor):c.apply(a,l))).powerHitKeyIsDownPrevious=!1,r.keys=[new me(e),new me(i),new me(s),new me(n),new me(o)],r.extraKeys=Array.isArray(u)?u.map((function(e){return new me(e)})):[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(t,e),ae(t,[{key:"getInput",value:function(){var e,t=this.keys[0].isDown||this.extraKeys.some((function(e){return"KeyD"===e.value&&e.isDown})),i=this.keys[1].isDown||this.extraKeys.some((function(e){return"KeyG"===e.value&&e.isDown})),s=this.keys[2].isDown||this.extraKeys.some((function(e){return"KeyR"===e.value&&e.isDown})),n=(null===(e=this.keys[3])||void 0===e?void 0:e.isDown)||this.extraKeys.some((function(e){return e.isDown&&["KeyV","KeyF","ArrowDown"].includes(e.value)})),o=this.keys[4].isDown||this.extraKeys.some((function(e){return"KeyZ"===e.value&&e.isDown}));this.xDirection=t?-1:i?1:0,this.yDirection=s?-1:n?1:0;var r=o;this.powerHit=!this.powerHitKeyIsDownPrevious&&r?1:0,this.powerHitKeyIsDownPrevious=r}},{key:"subscribe",value:function(){this.keys.forEach((function(e){return e.subscribe()})),this.extraKeys.forEach((function(e){return e.subscribe()})),this.downRightKey&&this.downRightKey.subscribe()}},{key:"unsubscribe",value:function(){this.keys.forEach((function(e){return e.unsubscribe()})),this.extraKeys.forEach((function(e){return e.unsubscribe()})),this.downRightKey&&this.downRightKey.unsubscribe()}}])}(C),me=function(){return ae((function e(t){oe(this,e),this.value=t,this.isDown=!1,this.isUp=!0,this.downListener=this.downHandler.bind(this),this.upListener=this.upHandler.bind(this),this.subscribe()}),[{key:"downHandler",value:function(e){e.code===this.value&&(this.isDown=!0,this.isUp=!1,e.preventDefault())}},{key:"upHandler",value:function(e){e.code===this.value&&(this.isDown=!1,this.isUp=!0,e.preventDefault())}},{key:"subscribe",value:function(){window.addEventListener("keyup",this.upListener),window.addEventListener("keydown",this.downListener)}},{key:"unsubscribe",value:function(){window.removeEventListener("keydown",this.downListener),window.removeEventListener("keyup",this.upListener),this.isDown=!1,this.isUp=!0}}])}(),fe=i(789);function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ge(s.key),s)}}function ve(e,t,i){return t&&be(e.prototype,t),i&&be(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ge(e){var t=function(e){if("object"!=ye(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=ye(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ye(t)?t:t+""}var we=j.I.SOUNDS,Ee=function(){return ve((function e(t){pe(this,e),this.sounds={bgm:new ke(t[we.BGM].sound),pipikachu:new ke(t[we.PIPIKACHU].sound),pika:new ke(t[we.PIKA].sound),chu:new ke(t[we.CHU].sound),pi:new ke(t[we.PI].sound),pikachu:new ke(t[we.PIKACHU].sound),powerHit:new ke(t[we.POWERHIT].sound),ballTouchesGround:new ke(t[we.BALLTOUCHESGROUND].sound)},this.sounds.bgm.loop=!0,this.properBGMVolume=.2,this.properSFXVolume=.35,this.adjustVolume()}),[{key:"adjustVolume",value:function(){for(var e in this.sounds)this.sounds[e].volume="bgm"===e?this.properBGMVolume:this.properSFXVolume}},{key:"turnBGMVolume",value:function(e){var t;t=e?this.properBGMVolume:0,this.sounds.bgm.volume=t}},{key:"turnSFXVolume",value:function(e){var t;for(var i in t=e?this.properSFXVolume:0,this.sounds)"bgm"!==i&&(this.sounds[i].volume=t)}},{key:"muteAll",value:function(){fe.s3.muteAll()}},{key:"unmuteAll",value:function(){fe.s3.unmuteAll()}}])}(),ke=function(){return ve((function e(t){pe(this,e),this.center=t,this.left=fe.AB.from(t.url),this.right=fe.AB.from(t.url);var i=new fe.uW.StereoFilter(0),s=new fe.uW.StereoFilter(-.75),n=new fe.uW.StereoFilter(.75);this.center.filters=[i],this.left.filters=[s],this.right.filters=[n]}),[{key:"volume",set:function(e){this.center.volume=e,this.left.volume=e,this.right.volume=e}},{key:"loop",set:function(e){this.center.loop=e,this.left.loop=e,this.right.loop=e}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;0===e?this.center.play():-1===e?this.left.play():1===e&&this.right.play()}},{key:"stop",value:function(){this.center.stop(),this.left.stop(),this.right.stop()}}])}();function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Le(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Se(s.key),s)}}function Se(e){var t=function(e){if("object"!=xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=xe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xe(t)?t:t+""}var Ce=function(){return e=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view={intro:new q(i),menu:new $(i),game:new J(i),fadeInOut:new Q(i)},t.addChild(this.view.intro.container),t.addChild(this.view.menu.container),t.addChild(this.view.game.container),t.addChild(this.view.fadeInOut.black),this.view.intro.visible=!1,this.view.menu.visible=!1,this.view.game.visible=!1,this.view.fadeInOut.visible=!1,this.audio=new Ee(i),this.physics=new S(!0,!0),this.keyboardArray=[new de("KeyD","KeyG","KeyR","KeyV","KeyZ","KeyF"),new de("ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Enter")],this.normalFPS=25,this.slowMotionFPS=5,this.SLOW_MOTION_FRAMES_NUM=6,this.slowMotionFramesLeft=0,this.slowMotionNumOfSkippedFrames=0,this.selectedWithWho=0,this.scores=[0,0],this.winningScore=15,this.gameEnded=!1,this.roundEnded=!1,this.isPlayer2Serve=!1,this.frameCounter=0,this.frameTotal={intro:165,afterMenuSelection:15,beforeStartOfNewGame:15,startOfNewGame:71,afterEndOfRound:5,beforeStartOfNextRound:30,gameEnd:211},this.noInputFrameCounter=0,this.noInputFrameTotal={menu:225},this.paused=!1,this.isStereoSound=!0,this._isPracticeMode=!1,this.state=this.intro},(t=[{key:"gameLoop",value:function(){if(!0!==this.paused){if(this.slowMotionFramesLeft>0){if(this.slowMotionNumOfSkippedFrames++,this.slowMotionNumOfSkippedFrames%Math.round(this.normalFPS/this.slowMotionFPS)!=0)return;this.slowMotionFramesLeft--,this.slowMotionNumOfSkippedFrames=0}this.keyboardArray[0].getInput(),this.keyboardArray[1].getInput(),this.state()}}},{key:"intro",value:function(){0===this.frameCounter&&(this.view.intro.visible=!0,this.view.fadeInOut.setBlackAlphaTo(0),this.audio.sounds.bgm.stop()),this.view.intro.drawMark(this.frameCounter),this.frameCounter++,1!==this.keyboardArray[0].powerHit&&1!==this.keyboardArray[1].powerHit||(this.frameCounter=0,this.view.intro.visible=!1,this.state=this.menu),this.frameCounter>=this.frameTotal.intro&&(this.frameCounter=0,this.view.intro.visible=!1,this.state=this.menu)}},{key:"menu",value:function(){if(0===this.frameCounter&&(this.view.menu.visible=!0,this.view.fadeInOut.setBlackAlphaTo(0),this.selectedWithWho=0,this.view.menu.selectWithWho(this.selectedWithWho)),this.view.menu.drawFightMessage(this.frameCounter),this.view.menu.drawSachisoft(this.frameCounter),this.view.menu.drawSittingPikachuTiles(this.frameCounter),this.view.menu.drawPikachuVolleyballMessage(this.frameCounter),this.view.menu.drawPokemonMessage(this.frameCounter),this.view.menu.drawWithWhoMessages(this.frameCounter),this.frameCounter++,this.frameCounter<71&&(1===this.keyboardArray[0].powerHit||1===this.keyboardArray[1].powerHit))this.frameCounter=71;else if(!(this.frameCounter<=71)){if(-1!==this.keyboardArray[0].yDirection&&-1!==this.keyboardArray[1].yDirection||1!==this.selectedWithWho?1!==this.keyboardArray[0].yDirection&&1!==this.keyboardArray[1].yDirection||0!==this.selectedWithWho?this.noInputFrameCounter++:(this.noInputFrameCounter=0,this.selectedWithWho=1,this.view.menu.selectWithWho(this.selectedWithWho),this.audio.sounds.pi.play()):(this.noInputFrameCounter=0,this.selectedWithWho=0,this.view.menu.selectWithWho(this.selectedWithWho),this.audio.sounds.pi.play()),1===this.keyboardArray[0].powerHit||1===this.keyboardArray[1].powerHit)return 1===this.selectedWithWho?(this.physics.player1.isComputer=!1,this.physics.player2.isComputer=!1):1===this.keyboardArray[0].powerHit?(this.physics.player1.isComputer=!1,this.physics.player2.isComputer=!0):1===this.keyboardArray[1].powerHit&&(this.physics.player1.isComputer=!0,this.physics.player2.isComputer=!1),this.audio.sounds.pikachu.play(),this.frameCounter=0,this.noInputFrameCounter=0,void(this.state=this.afterMenuSelection);this.noInputFrameCounter>=this.noInputFrameTotal.menu&&(this.physics.player1.isComputer=!0,this.physics.player2.isComputer=!0,this.frameCounter=0,this.noInputFrameCounter=0,this.state=this.afterMenuSelection)}}},{key:"afterMenuSelection",value:function(){this.view.fadeInOut.changeBlackAlphaBy(1/16),this.frameCounter++,this.frameCounter>=this.frameTotal.afterMenuSelection&&(this.frameCounter=0,this.state=this.beforeStartOfNewGame)}},{key:"beforeStartOfNewGame",value:function(){this.frameCounter++,this.frameCounter>=this.frameTotal.beforeStartOfNewGame&&(this.frameCounter=0,this.view.menu.visible=!1,this.state=this.startOfNewGame)}},{key:"startOfNewGame",value:function(){0===this.frameCounter&&(this.view.game.visible=!0,this.gameEnded=!1,this.roundEnded=!1,this.isPlayer2Serve=!1,this.physics.player1.gameEnded=!1,this.physics.player1.isWinner=!1,this.physics.player2.gameEnded=!1,this.physics.player2.isWinner=!1,this.scores[0]=0,this.scores[1]=0,this.view.game.drawScoresToScoreBoards(this.scores),this.physics.player1.initializeForNewRound(),this.physics.player2.initializeForNewRound(),this.physics.ball.initializeForNewRound(this.isPlayer2Serve),this.view.game.drawPlayersAndBall(this.physics),this.view.fadeInOut.setBlackAlphaTo(1),this.audio.sounds.bgm.play()),this.view.game.drawGameStartMessage(this.frameCounter,this.frameTotal.startOfNewGame),this.view.game.drawCloudsAndWave(),this.view.fadeInOut.changeBlackAlphaBy(-1/17),this.frameCounter++,this.frameCounter>=this.frameTotal.startOfNewGame&&(this.frameCounter=0,this.view.fadeInOut.setBlackAlphaTo(0),this.state=this.round)}},{key:"round",value:function(){var e=1===this.keyboardArray[0].powerHit||1===this.keyboardArray[1].powerHit;if(!0===this.physics.player1.isComputer&&!0===this.physics.player2.isComputer&&e)return this.frameCounter=0,this.view.game.visible=!1,void(this.state=this.intro);var t=this.physics.runEngineForNextFrame(this.keyboardArray);if(this.playSoundEffect(),this.view.game.drawPlayersAndBall(this.physics),this.view.game.drawCloudsAndWave(),!0===this.gameEnded)return this.view.game.drawGameEndMessage(this.frameCounter),this.frameCounter++,void((this.frameCounter>=this.frameTotal.gameEnd||this.frameCounter>=70&&e)&&(this.frameCounter=0,this.view.game.visible=!1,this.state=this.intro));t&&!1===this._isPracticeMode&&!1===this.roundEnded&&!1===this.gameEnded&&(this.physics.ball.punchEffectX<k?(this.isPlayer2Serve=!0,this.scores[1]>=this.winningScore&&(this.gameEnded=!0,this.physics.player1.isWinner=!1,this.physics.player2.isWinner=!0,this.physics.player1.gameEnded=!0,this.physics.player2.gameEnded=!0)):(this.isPlayer2Serve=!1,this.scores[0]>=this.winningScore&&(this.gameEnded=!0,this.physics.player1.isWinner=!0,this.physics.player2.isWinner=!1,this.physics.player1.gameEnded=!0,this.physics.player2.gameEnded=!0)),this.view.game.drawScoresToScoreBoards(this.scores),!1===this.roundEnded&&!1===this.gameEnded&&(this.slowMotionFramesLeft=this.SLOW_MOTION_FRAMES_NUM),this.roundEnded=!0),!0===this.roundEnded&&!1===this.gameEnded&&0===this.slowMotionFramesLeft&&(this.view.fadeInOut.changeBlackAlphaBy(1/16),this.state=this.afterEndOfRound)}},{key:"afterEndOfRound",value:function(){this.view.fadeInOut.changeBlackAlphaBy(1/16),this.frameCounter++,this.frameCounter>=this.frameTotal.afterEndOfRound&&(this.frameCounter=0,this.state=this.beforeStartOfNextRound)}},{key:"beforeStartOfNextRound",value:function(){0===this.frameCounter&&(this.view.fadeInOut.setBlackAlphaTo(1),this.view.game.drawReadyMessage(!1),this.physics.player1.initializeForNewRound(),this.physics.player2.initializeForNewRound(),this.physics.ball.initializeForNewRound(this.isPlayer2Serve),this.view.game.drawPlayersAndBall(this.physics)),this.view.game.drawCloudsAndWave(),this.view.fadeInOut.changeBlackAlphaBy(-1/16),this.frameCounter++,this.frameCounter%5==0&&this.view.game.toggleReadyMessage(),this.frameCounter>=this.frameTotal.beforeStartOfNextRound&&(this.frameCounter=0,this.view.game.drawReadyMessage(!1),this.view.fadeInOut.setBlackAlphaTo(0),this.roundEnded=!1,this.state=this.round)}},{key:"playSoundEffect",value:function(){for(var e=this.audio,t=0;t<2;t++){var i=this.physics["player".concat(t+1)].sound,s=0;this.isStereoSound&&(s=0===t?-1:1),!0===i.pipikachu&&(e.sounds.pipikachu.play(s),i.pipikachu=!1),!0===i.pika&&(e.sounds.pika.play(s),i.pika=!1),!0===i.chu&&(e.sounds.chu.play(s),i.chu=!1)}var n=this.physics.ball,o=n.sound,r=0;this.isStereoSound&&(n.punchEffectX<k?r=-1:n.punchEffectX>k&&(r=1)),!0===o.powerHit&&(e.sounds.powerHit.play(r),o.powerHit=!1),!0===o.ballTouchesGround&&(e.sounds.ballTouchesGround.play(r),o.ballTouchesGround=!1)}},{key:"restart",value:function(){this.frameCounter=0,this.noInputFrameCounter=0,this.slowMotionFramesLeft=0,this.slowMotionNumOfSkippedFrames=0,this.view.menu.visible=!1,this.view.game.visible=!1,this.state=this.intro}},{key:"isPracticeMode",get:function(){return this._isPracticeMode},set:function(e){this._isPracticeMode=e,this.view.game.scoreBoards[0].visible=!e,this.view.game.scoreBoards[1].visible=!e}}])&&Le(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),Pe=i(513),Ie={_precedence:0,pause:function(e,t){t>this._precedence&&(e.paused=!0,this._precedence=t)},resume:function(e,t){t===this._precedence&&(e.paused=!1,this._precedence=0)}};function Be(e){if(e.graphic){var t=document.getElementById("graphic-sharp-btn"),i=document.getElementById("graphic-soft-btn");switch(e.graphic){case"sharp":i.classList.remove("selected"),t.classList.add("selected");break;case"soft":t.classList.remove("selected"),i.classList.add("selected")}}if(e.bgm){var s=document.getElementById("bgm-on-btn"),n=document.getElementById("bgm-off-btn");switch(e.bgm){case"on":n.classList.remove("selected"),s.classList.add("selected");break;case"off":s.classList.remove("selected"),n.classList.add("selected")}}if(e.sfx){var o=document.getElementById("stereo-btn"),r=document.getElementById("mono-btn"),a=document.getElementById("sfx-off-btn");switch(e.sfx){case"stereo":r.classList.remove("selected"),a.classList.remove("selected"),o.classList.add("selected");break;case"mono":a.classList.remove("selected"),o.classList.remove("selected"),r.classList.add("selected");break;case"off":o.classList.remove("selected"),r.classList.remove("selected"),a.classList.add("selected")}}if(e.speed){var c=document.getElementById("slow-speed-btn"),l=document.getElementById("medium-speed-btn"),u=document.getElementById("fast-speed-btn");switch(e.speed){case"slow":l.classList.remove("selected"),u.classList.remove("selected"),c.classList.add("selected");break;case"medium":u.classList.remove("selected"),c.classList.remove("selected"),l.classList.add("selected");break;case"fast":c.classList.remove("selected"),l.classList.remove("selected"),u.classList.add("selected")}}if(e.winningScore){var h=document.getElementById("winning-score-5-btn"),d=document.getElementById("winning-score-10-btn"),m=document.getElementById("winning-score-15-btn");switch(e.winningScore){case"5":d.classList.remove("selected"),m.classList.remove("selected"),h.classList.add("selected");break;case"10":m.classList.remove("selected"),h.classList.remove("selected"),d.classList.add("selected");break;case"15":h.classList.remove("selected"),d.classList.remove("selected"),m.classList.add("selected")}}}function Me(e,t){Ve(),Te(e),document.getElementById(e).classList.toggle("show")?Ie.pause(t,1):Ie.resume(t,1)}function Ae(e,t){Ve(),document.getElementById(e).classList.add("open"),document.getElementById(t).classList.add("show")}function Te(e){for(var t=document.getElementsByClassName("dropdown"),i=0;i<t.length;i++)t[i].id!==e&&t[i].classList.remove("show")}function Ve(){for(var e=document.getElementsByClassName("submenu"),t=0;t<e.length;t++)e[t].classList.remove("show");for(var i=document.getElementsByClassName("submenu-btn"),s=0;s<i.length;s++)i[s].classList.remove("open")}o.A4.registerPlugin("prepare",r.p8),o.A4.registerPlugin("batch",o.ch),h.KB.registerPlugin("prepare",m.S),h.KB.registerPlugin("sprite",d.$),c.aH.registerPlugin(l.A),s.W.RESOLUTION=2,s.W.SCALE_MODE=n.M6.NEAREST,s.W.ROUND_PIXELS=!0;var Ne=(0,o.q5)({width:432,height:304,antialias:!1,backgroundColor:0,backgroundAlpha:1,forceCanvas:!0}),De=new a.mc,Oe=new u.Rv,_e=new c.aH;for(var We in Ne.view.setAttribute("id","game-canvas"),document.getElementById("game-canvas-container").appendChild(Ne.view),Ne.render(De),_e.add(j.I.SPRITE_SHEET),j.I.SOUNDS)_e.add(j.I.SOUNDS[We]);function Re(){var e=new Ce(De,_e.resources);(function(e,t){var i=function(i){switch(Be(i),i.graphic){case"sharp":document.getElementById("game-canvas").classList.remove("graphic-soft");break;case"soft":document.getElementById("game-canvas").classList.add("graphic-soft")}switch(i.bgm){case"on":e.audio.turnBGMVolume(!0);break;case"off":e.audio.turnBGMVolume(!1)}switch(i.sfx){case"stereo":e.audio.turnSFXVolume(!0),e.isStereoSound=!0;break;case"mono":e.audio.turnSFXVolume(!0),e.isStereoSound=!1;break;case"off":e.audio.turnSFXVolume(!1)}switch(i.speed){case"slow":e.normalFPS=20,t.maxFPS=e.normalFPS;break;case"medium":e.normalFPS=25,t.maxFPS=e.normalFPS;break;case"fast":e.normalFPS=30,t.maxFPS=e.normalFPS}switch(i.winningScore){case"5":e.winningScore=5;break;case"10":e.winningScore=10;break;case"15":e.winningScore=15}};i({graphic:Pe.U.get("pv-offline-graphic"),bgm:Pe.U.get("pv-offline-bgm"),sfx:Pe.U.get("pv-offline-sfx"),speed:Pe.U.get("pv-offline-speed"),winningScore:Pe.U.get("pv-offline-winningScore")}),function(e,t){var i=document.getElementById("game-dropdown-btn"),s=document.getElementById("options-dropdown-btn"),n=document.getElementById("about-btn");i.disabled=!1,s.disabled=!1,n.disabled=!1;var o=document.getElementById("pause-btn");o.addEventListener("click",(function(){o.classList.contains("selected")?(o.classList.remove("selected"),Ie.resume(e,3)):(o.classList.add("selected"),Ie.pause(e,3))})),document.getElementById("restart-btn").addEventListener("click",(function(){o.classList.contains("selected")&&(o.classList.remove("selected"),Ie.resume(e,3)),e.restart()}));var r=document.getElementById("graphic-sharp-btn"),a=document.getElementById("graphic-soft-btn");r.addEventListener("click",(function(){t({graphic:"sharp"})})),a.addEventListener("click",(function(){t({graphic:"soft"})}));var c=document.getElementById("bgm-on-btn"),l=document.getElementById("bgm-off-btn");c.addEventListener("click",(function(){t({bgm:"on"})})),l.addEventListener("click",(function(){t({bgm:"off"})}));var u=document.getElementById("stereo-btn"),h=document.getElementById("mono-btn"),d=document.getElementById("sfx-off-btn");u.addEventListener("click",(function(){t({sfx:"stereo"})})),h.addEventListener("click",(function(){t({sfx:"mono"})})),d.addEventListener("click",(function(){t({sfx:"off"})}));var m=document.getElementById("slow-speed-btn"),f=document.getElementById("medium-speed-btn"),y=document.getElementById("fast-speed-btn");m.addEventListener("click",(function(){t({speed:"slow"})})),f.addEventListener("click",(function(){t({speed:"medium"})})),y.addEventListener("click",(function(){t({speed:"fast"})}));var p=document.getElementById("winning-score-5-btn"),b=document.getElementById("winning-score-10-btn"),v=document.getElementById("winning-score-15-btn"),g=document.getElementById("notice-box-1"),w=document.getElementById("notice-ok-btn-1"),E=document.getElementById("winning-score-in-notice-box-1");function k(t){return!(e.state!==e.round&&e.state!==e.afterEndOfRound&&e.state!==e.beforeStartOfNextRound||!(e.scores[0]>=t||e.scores[1]>=t))}var x=document.getElementById("notice-box-2"),L=document.getElementById("notice-ok-btn-2");p.addEventListener("click",(function(){if(!p.classList.contains("selected"))return!0===e.isPracticeMode?(x.classList.remove("hidden"),i.disabled=!0,s.disabled=!0,n.disabled=!0,void Ie.pause(e,2)):k(5)?(E.textContent="5",g.classList.remove("hidden"),i.disabled=!0,s.disabled=!0,n.disabled=!0,void Ie.pause(e,2)):void t({winningScore:"5"})})),b.addEventListener("click",(function(){if(!b.classList.contains("selected"))return!0===e.isPracticeMode?(x.classList.remove("hidden"),i.disabled=!0,s.disabled=!0,n.disabled=!0,void Ie.pause(e,2)):k(10)?(E.textContent="10",g.classList.remove("hidden"),i.disabled=!0,s.disabled=!0,n.disabled=!0,void Ie.pause(e,2)):void t({winningScore:"10"})})),v.addEventListener("click",(function(){if(!v.classList.contains("selected"))return!0===e.isPracticeMode?(x.classList.remove("hidden"),i.disabled=!0,s.disabled=!0,n.disabled=!0,void Ie.pause(e,2)):k(15)?(E.textContent="15",g.classList.remove("hidden"),i.disabled=!0,s.disabled=!0,n.disabled=!0,void Ie.pause(e,2)):void t({winningScore:"15"})})),w.addEventListener("click",(function(){g.classList.contains("hidden")||(g.classList.add("hidden"),i.disabled=!1,s.disabled=!1,n.disabled=!1,Ie.resume(e,2))})),L.addEventListener("click",(function(){x.classList.contains("hidden")||(x.classList.add("hidden"),i.disabled=!1,s.disabled=!1,n.disabled=!1,Ie.resume(e,2))}));var S=document.getElementById("practice-mode-on-btn"),C=document.getElementById("practice-mode-off-btn");S.addEventListener("click",(function(){C.classList.remove("selected"),S.classList.add("selected"),e.isPracticeMode=!0})),C.addEventListener("click",(function(){S.classList.remove("selected"),C.classList.add("selected"),e.isPracticeMode=!1}));var P=document.getElementById("about-box"),I=document.getElementById("close-about-btn");n.addEventListener("click",(function(){P.classList.contains("hidden")?(P.classList.remove("hidden"),i.disabled=!0,s.disabled=!0,Ie.pause(e,2)):(P.classList.add("hidden"),i.disabled=!1,s.disabled=!1,Ie.resume(e,2))})),I.addEventListener("click",(function(){P.classList.contains("hidden")||(P.classList.add("hidden"),i.disabled=!1,s.disabled=!1,Ie.resume(e,2))})),document.getElementById("reset-to-default-btn").addEventListener("click",(function(){C.click(),t({graphic:"sharp",bgm:"on",sfx:"stereo",speed:"medium",winningScore:"15"})}))}(e,(function(e){i(e),function(e){Be(e),e.graphic&&Pe.U.set("pv-offline-graphic",e.graphic),e.bgm&&Pe.U.set("pv-offline-bgm",e.bgm),e.sfx&&Pe.U.set("pv-offline-sfx",e.sfx),e.speed&&Pe.U.set("pv-offline-speed",e.speed),e.winningScore&&Pe.U.set("pv-offline-winningScore",e.winningScore)}(e)})),function(e){window.addEventListener("click",(function(t){t.target.matches(".dropdown-btn, .submenu-btn")||(Ve(),Te(""),Ie.resume(e,1))})),document.getElementById("game-dropdown-btn").addEventListener("click",(function(){Me("game-dropdown",e)})),document.getElementById("options-dropdown-btn").addEventListener("click",(function(){Me("options-dropdown",e)})),document.getElementById("graphic-submenu-btn").addEventListener("mouseover",(function(){Ae("graphic-submenu-btn","graphic-submenu")})),document.getElementById("bgm-submenu-btn").addEventListener("mouseover",(function(){Ae("bgm-submenu-btn","bgm-submenu")})),document.getElementById("sfx-submenu-btn").addEventListener("mouseover",(function(){Ae("sfx-submenu-btn","sfx-submenu")})),document.getElementById("speed-submenu-btn").addEventListener("mouseover",(function(){Ae("speed-submenu-btn","speed-submenu")})),document.getElementById("winning-score-submenu-btn").addEventListener("mouseover",(function(){Ae("winning-score-submenu-btn","winning-score-submenu")})),document.getElementById("practice-mode-submenu-btn").addEventListener("mouseover",(function(){Ae("practice-mode-submenu-btn","practice-mode-submenu")})),document.getElementById("reset-to-default-btn").addEventListener("mouseover",(function(){Ve()})),document.getElementById("bgm-submenu-btn").addEventListener("click",(function(){Ae("bgm-submenu-btn","bgm-submenu")})),document.getElementById("sfx-submenu-btn").addEventListener("click",(function(){Ae("sfx-submenu-btn","sfx-submenu")})),document.getElementById("speed-submenu-btn").addEventListener("click",(function(){Ae("speed-submenu-btn","speed-submenu")})),document.getElementById("winning-score-submenu-btn").addEventListener("click",(function(){Ae("winning-score-submenu-btn","winning-score-submenu")})),document.getElementById("practice-mode-submenu-btn").addEventListener("click",(function(){Ae("practice-mode-submenu-btn","practice-mode-submenu")})),document.getElementById("reset-to-default-btn").addEventListener("click",(function(){Ve()}))}(e),window.addEventListener("keydown",(function(e){if("Escape"===e.code){var t=document.getElementById("menu-bar");t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden"),e.preventDefault()}else"Space"===e.code&&document.getElementById("about-box").classList.contains("hidden")&&e.preventDefault()})),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?e.audio.unmuteAll():e.audio.muteAll()}))})(e,Oe),function(e){Oe.maxFPS=e.normalFPS,Oe.add((function(){e.gameLoop(),Ne.render(De)})),Oe.start()}(e)}!function(){var e=document.getElementById("loading-box"),t=document.getElementById("progress-bar");_e.onProgress.add((function(){t.style.width="".concat(_e.progress,"%")})),_e.onComplete.add((function(){e.classList.add("hidden")}));var i=document.getElementById("about-box"),s=document.getElementById("about-btn"),n=document.getElementById("close-about-btn"),o=document.getElementById("game-dropdown-btn"),r=document.getElementById("options-dropdown-btn");o.disabled=!0,r.disabled=!0;var a=function(){i.classList.contains("hidden")||(i.classList.add("hidden"),s.disabled=!0),s.getElementsByClassName("text-play")[0].classList.add("hidden"),s.getElementsByClassName("text-about")[0].classList.remove("hidden"),s.classList.remove("glow"),n.getElementsByClassName("text-play")[0].classList.add("hidden"),n.getElementsByClassName("text-close")[0].classList.remove("hidden"),n.classList.remove("glow"),_e.load(Re),e.classList.remove("hidden"),s.removeEventListener("click",a),n.removeEventListener("click",a)};s.addEventListener("click",a),n.addEventListener("click",a)}()},513:(e,t,i)=>{i.d(t,{U:()=>s});var s={get:function(e){var t=null;try{t=localStorage.getItem(e)}catch(e){console.error(e)}return t},set:function(e,t){try{localStorage.setItem(e,t)}catch(e){console.error(e)}}}},591:(e,t,i)=>{i.d(t,{I:()=>s});var s={SPRITE_SHEET:"../resources/assets/images/sprite_sheet.json",TEXTURES:{},SOUNDS:{}},n=s.TEXTURES;n.PIKACHU=function(e,t){return"pikachu/pikachu_".concat(e,"_").concat(t,".png")},n.BALL=function(e){return"ball/ball_".concat(e,".png")},n.NUMBER=function(e){return"number/number_".concat(e,".png")},n.SKY_BLUE="objects/sky_blue.png",n.MOUNTAIN="objects/mountain.png",n.GROUND_RED="objects/ground_red.png",n.GROUND_LINE="objects/ground_line.png",n.GROUND_LINE_LEFT_MOST="objects/ground_line_leftmost.png",n.GROUND_LINE_RIGHT_MOST="objects/ground_line_rightmost.png",n.GROUND_YELLOW="objects/ground_yellow.png",n.NET_PILLAR_TOP="objects/net_pillar_top.png",n.NET_PILLAR="objects/net_pillar.png",n.SHADOW="objects/shadow.png",n.BALL_HYPER="ball/ball_hyper.png",n.BALL_TRAIL="ball/ball_trail.png",n.BALL_PUNCH="ball/ball_punch.png",n.CLOUD="objects/cloud.png",n.WAVE="objects/wave.png",n.BLACK="objects/black.png",n.SACHISOFT="messages/common/sachisoft.png",n.READY="messages/common/ready.png",n.GAME_END="messages/common/game_end.png",n.MARK="messages/ja/mark.png",n.POKEMON="messages/ja/pokemon.png",n.PIKACHU_VOLLEYBALL="messages/ja/pikachu_volleyball.png",n.FIGHT="messages/ja/fight.png",n.WITH_COMPUTER="messages/ja/with_computer.png",n.WITH_FRIEND="messages/ja/with_friend.png",n.GAME_START="messages/ja/game_start.png",n.SITTING_PIKACHU="sitting_pikachu.png";var o=s.SOUNDS;o.BGM="../resources/assets/sounds/bgm.mp3",o.PIPIKACHU="../resources/assets/sounds/WAVE140_1.wav",o.PIKA="../resources/assets/sounds/WAVE141_1.wav",o.CHU="../resources/assets/sounds/WAVE142_1.wav",o.PI="../resources/assets/sounds/WAVE143_1.wav",o.PIKACHU="../resources/assets/sounds/WAVE144_1.wav",o.POWERHIT="../resources/assets/sounds/WAVE145_1.wav",o.BALLTOUCHESGROUND="../resources/assets/sounds/WAVE146_1.wav"}},e=>{e.O(0,[27],(()=>e(e.s=450))),e.O()}]);
//# sourceMappingURL=main.bundle.js.map