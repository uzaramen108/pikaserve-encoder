{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://pikachu-volleyball/./node_modules/file-saver/dist/FileSaver.min.js","webpack://pikachu-volleyball/./src/resources/js/replay/replay_saver.js","webpack://pikachu-volleyball/./src/resources/js/ui.js","webpack://pikachu-volleyball/./src/resources/js/main.js","webpack://pikachu-volleyball/./src/resources/js/utils/local_storage_wrapper.js"],"sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","import { saveAs } from 'file-saver';\r\nimport { serialize } from '../utils/serialize.js';\r\nimport { getHashCode } from '../utils/hash_code.js';\r\nimport { convertUserInputTo5bitNumber } from '../utils/input_conversion.js';\r\n\r\n/** @typedef {import('../physics.js').PikaUserInput} PikaUserInput */\r\n/** @typedef {{speed: string, winningScore: number}} Options options communicated with the peer */\r\n\r\n/**\r\n * Classs representing replay saver\r\n */\r\nclass ReplaySaver {\r\n  constructor() {\r\n    this.frameCounter = 0;\r\n    this.roomID = ''; // used for set RNGs\r\n    this.nicknames = ['', '']; // [0]: room creator's nickname, [1]: room joiner's nickname\r\n    this.partialPublicIPs = ['', '']; // [0]: room creator's partial public IP address, [1]: room joiner's partial public IP address\r\n    this.inputs = []; // number[], the number in the array represents player1, player2 input\r\n    this.options = [[0, { speed: 'fast', winningScore: 15 }]]; // [frameCounter, options][];\r\n    this.chats = []; // [frameCounter, playerIndex (1 or 2), chatMessage][]\r\n  }\r\n\r\n  /**\r\n   * Record room ID for RNGs to be used for replay\r\n   * @param {string} roomID\r\n   */\r\n  recordRoomID(roomID) {\r\n    this.roomID = roomID;\r\n  }\r\n\r\n  /**\r\n   * Record nicknames\r\n   * @param {string} roomCreatorNickname\r\n   * @param {string} roomJoinerNickname\r\n   */\r\n  recordNicknames(roomCreatorNickname, roomJoinerNickname) {\r\n    this.nicknames[0] = roomCreatorNickname;\r\n    this.nicknames[1] = roomJoinerNickname;\r\n  }\r\n\r\n  /**\r\n   * Record partial public ips\r\n   * @param {string} roomCreatorPartialPublicIP\r\n   * @param {string} roomJoinerPartialPublicIP\r\n   */\r\n  recordPartialPublicIPs(\r\n    roomCreatorPartialPublicIP,\r\n    roomJoinerPartialPublicIP\r\n  ) {\r\n    this.partialPublicIPs[0] = roomCreatorPartialPublicIP;\r\n    this.partialPublicIPs[1] = roomJoinerPartialPublicIP;\r\n  }\r\n\r\n  /**\r\n   * Record user inputs\r\n   * @param {PikaUserInput} player1Input\r\n   * @param {PikaUserInput} player2Input\r\n   */\r\n  recordInputs(player1Input, player2Input) {\r\n    const usersInputNumber =\r\n      (convertUserInputTo5bitNumber(player1Input) << 5) +\r\n      convertUserInputTo5bitNumber(player2Input);\r\n    this.inputs.push(usersInputNumber);\r\n    this.frameCounter++;\r\n  }\r\n\r\n  cleanRecord() {\r\n    this.inputs = [];\r\n    this.frameCounter = 0;\r\n  }\r\n\r\n  /**\r\n   * Record game options\r\n   * @param {Options} options\r\n   */\r\n  recordOptions(options) {\r\n    this.options.push([this.frameCounter, options]);\r\n  }\r\n\r\n  /**\r\n   * Record a chat message\r\n   * @param {string} chatMessage\r\n   * @param {number} whichPlayerSide 1 or 2\r\n   */\r\n  recordChats(chatMessage, whichPlayerSide) {\r\n    this.chats.push([this.frameCounter, whichPlayerSide, chatMessage]);\r\n  }\r\n\r\n  /**\r\n   * Save as a file\r\n   */\r\n  saveAsFile() {\r\n    const pack = {\r\n      version: 'p2p-online',\r\n      roomID: this.roomID,\r\n      nicknames: this.nicknames,\r\n      partialPublicIPs: this.partialPublicIPs,\r\n      chats: this.chats,\r\n      options: this.options,\r\n      inputs: this.inputs,\r\n      hash: 0,\r\n    };\r\n\r\n    // This is for making it annoying to modify/fabricate the replay file.\r\n    // I'm worried about fabricating the replay file and distributing it even if it is unlikely.\r\n    // I doubt about the effect of inserting a hash code. But It would be better than doing nothing.\r\n    const hash = getHashCode(serialize(pack));\r\n    pack.hash = hash;\r\n\r\n    const packWithComment = {\r\n      _comment:\r\n        'Replay Viewer at: https://gorisanson.github.io/pikachu-volleyball-p2p-online/en/replay/',\r\n      pack: pack,\r\n    };\r\n\r\n    const blob = new Blob([JSON.stringify(packWithComment)], {\r\n      type: 'text/plain;charset=utf-8',\r\n    });\r\n    const d = new Date();\r\n    // The code removing illegal characters in Windows by replace method is from:\r\n    // https://stackoverflow.com/a/42210346/8581025\r\n    const filename = `${d.getFullYear()}${('0' + (d.getMonth() + 1)).slice(\r\n      -2\r\n    )}${('0' + d.getDate()).slice(-2)}_${('0' + d.getHours()).slice(-2)}${(\r\n      '0' + d.getMinutes()\r\n    ).slice(-2)}_${this.nicknames[0]}_${this.partialPublicIPs[0].replace(\r\n      '.*.*',\r\n      ''\r\n    )}_vs_${this.nicknames[1]}_${this.partialPublicIPs[1].replace(\r\n      '.*.*',\r\n      ''\r\n    )}.txt`.replace(/[/\\\\?%*:|\"<>]/g, '_');\r\n    saveAs(blob, filename, { autoBom: true });\r\n  }\r\n}\r\n\r\nexport const replaySaver = new ReplaySaver();","/**\n * Manages event listeners relevant to the UI (menu bar, buttons, etc.) of the web page\n */\n'use strict';\n\nimport { localStorageWrapper } from './utils/local_storage_wrapper.js';\nimport { replaySaver } from './replay/replay_saver.js';\n\n/** @typedef {import('./pikavolley.js').PikachuVolleyball} PikachuVolleyball */\n/** @typedef {import('@pixi/ticker').Ticker} Ticker */\n/** @typedef {{graphic?: string, bgm?: string, sfx?: string, speed?: string, winningScore?: string}} Options */\n\n/**\n * Enum for \"game paused by what?\".\n * The greater the number, the higher the precedence.\n *\n * @readonly\n * @enum {number}\n */\nconst PauseResumePrecedence = {\n  pauseBtn: 3,\n  messageBox: 2,\n  dropdown: 1,\n  notPaused: 0,\n};\n\n\n\n/**\n * Manages pausing and resuming of the game\n */\nconst pauseResumeManager = {\n  /** @type {number} PauseResumePrecedence enum */\n  _precedence: PauseResumePrecedence.notPaused,\n  /**\n   * Pause game\n   * @param {PikachuVolleyball} pikaVolley\n   * @param {number} precedence PauseResumePrecedence enum\n   */\n  pause: function (pikaVolley, precedence) {\n    // @ts-ignore\n    if (precedence > this._precedence) {\n      pikaVolley.paused = true;\n      this._precedence = precedence;\n    }\n  },\n  /**\n   * Resume game\n   * @param {PikachuVolleyball} pikaVolley\n   * @param {number} precedence PauseResumePrecedence enum\n   */\n  resume: function (pikaVolley, precedence) {\n    if (precedence === this._precedence) {\n      pikaVolley.paused = false;\n      this._precedence = PauseResumePrecedence.notPaused;\n    }\n  },\n};\n\n/**\n * Set up the user interface: menu bar, buttons, dropdowns, submenus, etc.\n * @param {PikachuVolleyball} pikaVolley\n * @param {Ticker} ticker\n */\nexport function setUpUI(pikaVolley, ticker) {\n  /**\n   * Apply options\n   * @param {Options} options\n   */\n  const applyOptions = (options) => {\n    setSelectedOptionsBtn(options);\n    switch (options.graphic) {\n      case 'sharp':\n        document.getElementById('game-canvas').classList.remove('graphic-soft');\n        break;\n      case 'soft':\n        document.getElementById('game-canvas').classList.add('graphic-soft');\n        break;\n    }\n    switch (options.bgm) {\n      case 'on':\n        pikaVolley.audio.turnBGMVolume(true);\n        break;\n      case 'off':\n        pikaVolley.audio.turnBGMVolume(false);\n        break;\n    }\n    switch (options.sfx) {\n      case 'stereo':\n        pikaVolley.audio.turnSFXVolume(true);\n        pikaVolley.isStereoSound = true;\n        break;\n      case 'mono':\n        pikaVolley.audio.turnSFXVolume(true);\n        pikaVolley.isStereoSound = false;\n        break;\n      case 'off':\n        pikaVolley.audio.turnSFXVolume(false);\n        break;\n    }\n    switch (options.speed) {\n      case 'slow':\n        pikaVolley.normalFPS = 20;\n        ticker.maxFPS = pikaVolley.normalFPS;\n        break;\n      case 'medium':\n        pikaVolley.normalFPS = 25;\n        ticker.maxFPS = pikaVolley.normalFPS;\n        break;\n      case 'fast':\n        pikaVolley.normalFPS = 30;\n        ticker.maxFPS = pikaVolley.normalFPS;\n        break;\n    }\n    switch (options.winningScore) {\n      case '5':\n        pikaVolley.winningScore = 5;\n        break;\n      case '10':\n        pikaVolley.winningScore = 10;\n        break;\n      case '15':\n        pikaVolley.winningScore = 15;\n        break;\n    }\n  };\n\n  /**\n   * Save options\n   * @param {Options} options\n   */\n  const saveOptions = (options) => {\n    setSelectedOptionsBtn(options);\n    if (options.graphic) {\n      localStorageWrapper.set('pv-offline-graphic', options.graphic);\n    }\n    if (options.bgm) {\n      localStorageWrapper.set('pv-offline-bgm', options.bgm);\n    }\n    if (options.sfx) {\n      localStorageWrapper.set('pv-offline-sfx', options.sfx);\n    }\n    if (options.speed) {\n      localStorageWrapper.set('pv-offline-speed', options.speed);\n    }\n    if (options.winningScore) {\n      localStorageWrapper.set('pv-offline-winningScore', options.winningScore);\n    }\n  };\n\n  /**\n   * Load options\n   * @returns {Options}\n   */\n  const loadOptions = () => ({\n    graphic: localStorageWrapper.get('pv-offline-graphic'),\n    bgm: localStorageWrapper.get('pv-offline-bgm'),\n    sfx: localStorageWrapper.get('pv-offline-sfx'),\n    speed: localStorageWrapper.get('pv-offline-speed'),\n    winningScore: localStorageWrapper.get('pv-offline-winningScore'),\n  });\n\n  /**\n   * Apply and save options\n   * @param {Options} options\n   */\n  const applyAndSaveOptions = (options) => {\n    applyOptions(options);\n    saveOptions(options);\n  };\n\n  const saveReplayBtn = document.getElementById('save-replay-btn');\n  saveReplayBtn.addEventListener('click', () => {\n    replaySaver.saveAsFile();\n  });\n\n  // Load and apply saved options\n  applyOptions(loadOptions());\n\n  setUpBtns(pikaVolley, applyAndSaveOptions);\n  setUpToShowDropdownsAndSubmenus(pikaVolley);\n\n  // hide or show menubar if the user presses the \"esc\" key\n  window.addEventListener('keydown', (event) => {\n    if (event.code === 'Escape') {\n      const menuBar = document.getElementById('menu-bar');\n      if (menuBar.classList.contains('hidden')) {\n        menuBar.classList.remove('hidden');\n      } else {\n        menuBar.classList.add('hidden');\n      }\n      event.preventDefault();\n    } else if (event.code === 'Space') {\n      const aboutBox = document.getElementById('about-box');\n      if (aboutBox.classList.contains('hidden')) {\n        event.preventDefault();\n      }\n    }\n  });\n\n  document.addEventListener('visibilitychange', function () {\n    if (document.visibilityState === 'visible') {\n      pikaVolley.audio.unmuteAll();\n    } else {\n      pikaVolley.audio.muteAll();\n    }\n  });\n}\nfunction copyToClipboard(text) {\n\tnavigator.clipboard.writeText(text).then(() => {\n    \talert(\"복사되었습니다. 원하는 곳에 붙여넣기하여 주세요.\");\n    }).catch(() => {\n    \tprompt(\"키보드의 ctrl+C 또는 마우스 오른쪽의 복사하기를 이용해주세요.\",text);\n    });\n};\n\n/**\n * Attach event listeners to the buttons\n * @param {PikachuVolleyball} pikaVolley\n * @param {(options: Options) => void} applyAndSaveOptions\n */\n\nfunction setUpBtns(pikaVolley, applyAndSaveOptions) {\n  const gameDropdownBtn = document.getElementById('game-dropdown-btn');\n  const optionsDropdownBtn = document.getElementById('options-dropdown-btn');\n  const aboutBtn = document.getElementById('about-btn');\n  const codeCopyBtn = document.getElementById('code-copy-btn');\n\n  codeCopyBtn.addEventListener('click', () => {\n    const codeBlock = document.getElementById('code-viewer-output');\n    const text = codeBlock.textContent//|| codeBlock.innerText; ✅ 텍스트 추출\n    copyToClipboard(text);\n  });\n  // @ts-ignore\n  gameDropdownBtn.disabled = false;\n  // @ts-ignore\n  optionsDropdownBtn.disabled = false;\n  // @ts-ignore\n  aboutBtn.disabled = false;\n\n  const pauseBtn = document.getElementById('pause-btn');\n  pauseBtn.addEventListener('click', () => {\n    if (pauseBtn.classList.contains('selected')) {\n      pauseBtn.classList.remove('selected');\n      pauseResumeManager.resume(pikaVolley, PauseResumePrecedence.pauseBtn);\n    } else {\n      pauseBtn.classList.add('selected');\n      pauseResumeManager.pause(pikaVolley, PauseResumePrecedence.pauseBtn);\n    }\n  });\n\n  const restartBtn = document.getElementById('restart-btn');\n  restartBtn.addEventListener('click', () => {\n    if (pauseBtn.classList.contains('selected')) {\n      pauseBtn.classList.remove('selected');\n      pauseResumeManager.resume(pikaVolley, PauseResumePrecedence.pauseBtn);\n    }\n    pikaVolley.restart();\n  });\n\n  const graphicSharpBtn = document.getElementById('graphic-sharp-btn');\n  const graphicSoftBtn = document.getElementById('graphic-soft-btn');\n  graphicSharpBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ graphic: 'sharp' });\n  });\n  graphicSoftBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ graphic: 'soft' });\n  });\n\n  const bgmOnBtn = document.getElementById('bgm-on-btn');\n  const bgmOffBtn = document.getElementById('bgm-off-btn');\n  bgmOnBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ bgm: 'on' });\n  });\n  bgmOffBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ bgm: 'off' });\n  });\n\n  const stereoBtn = document.getElementById('stereo-btn');\n  const monoBtn = document.getElementById('mono-btn');\n  const sfxOffBtn = document.getElementById('sfx-off-btn');\n  stereoBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ sfx: 'stereo' });\n  });\n  monoBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ sfx: 'mono' });\n  });\n  sfxOffBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ sfx: 'off' });\n  });\n\n  // Game speed:\n  //   slow: 1 frame per 50ms = 20 FPS\n  //   medium: 1 frame per 40ms = 25 FPS\n  //   fast: 1 frame per 33ms = 30.303030... FPS\n  const slowSpeedBtn = document.getElementById('slow-speed-btn');\n  const mediumSpeedBtn = document.getElementById('medium-speed-btn');\n  const fastSpeedBtn = document.getElementById('fast-speed-btn');\n  slowSpeedBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ speed: 'slow' });\n  });\n  mediumSpeedBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ speed: 'medium' });\n  });\n  fastSpeedBtn.addEventListener('click', () => {\n    applyAndSaveOptions({ speed: 'fast' });\n  });\n\n  const winningScore5Btn = document.getElementById('winning-score-5-btn');\n  const winningScore10Btn = document.getElementById('winning-score-10-btn');\n  const winningScore15Btn = document.getElementById('winning-score-15-btn');\n  const noticeBox1 = document.getElementById('notice-box-1');\n  const noticeOKBtn1 = document.getElementById('notice-ok-btn-1');\n  const winningScoreInNoticeBox1 = document.getElementById(\n    'winning-score-in-notice-box-1'\n  );\n  function isWinningScoreAlreadyReached(winningScore) {\n    const isGamePlaying =\n      pikaVolley.state === pikaVolley.round ||\n      pikaVolley.state === pikaVolley.afterEndOfRound ||\n      pikaVolley.state === pikaVolley.beforeStartOfNextRound;\n    if (\n      isGamePlaying &&\n      (pikaVolley.scores[0] >= winningScore ||\n        pikaVolley.scores[1] >= winningScore)\n    ) {\n      return true;\n    }\n    return false;\n  }\n  const noticeBox2 = document.getElementById('notice-box-2');\n  const noticeOKBtn2 = document.getElementById('notice-ok-btn-2');\n  winningScore5Btn.addEventListener('click', () => {\n    if (winningScore5Btn.classList.contains('selected')) {\n      return;\n    }\n    if (pikaVolley.isPracticeMode === true) {\n      noticeBox2.classList.remove('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = true;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = true;\n      // @ts-ignore\n      aboutBtn.disabled = true;\n      pauseResumeManager.pause(pikaVolley, PauseResumePrecedence.messageBox);\n      return;\n    }\n    if (isWinningScoreAlreadyReached(5)) {\n      winningScoreInNoticeBox1.textContent = '5';\n      noticeBox1.classList.remove('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = true;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = true;\n      // @ts-ignore\n      aboutBtn.disabled = true;\n      pauseResumeManager.pause(pikaVolley, PauseResumePrecedence.messageBox);\n      return;\n    }\n    applyAndSaveOptions({ winningScore: '5' });\n  });\n  winningScore10Btn.addEventListener('click', () => {\n    if (winningScore10Btn.classList.contains('selected')) {\n      return;\n    }\n    if (pikaVolley.isPracticeMode === true) {\n      noticeBox2.classList.remove('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = true;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = true;\n      // @ts-ignore\n      aboutBtn.disabled = true;\n      pauseResumeManager.pause(pikaVolley, PauseResumePrecedence.messageBox);\n      return;\n    }\n    if (isWinningScoreAlreadyReached(10)) {\n      winningScoreInNoticeBox1.textContent = '10';\n      noticeBox1.classList.remove('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = true;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = true;\n      // @ts-ignore\n      aboutBtn.disabled = true;\n      pauseResumeManager.pause(pikaVolley, PauseResumePrecedence.messageBox);\n      return;\n    }\n    applyAndSaveOptions({ winningScore: '10' });\n  });\n  winningScore15Btn.addEventListener('click', () => {\n    if (winningScore15Btn.classList.contains('selected')) {\n      return;\n    }\n    if (pikaVolley.isPracticeMode === true) {\n      noticeBox2.classList.remove('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = true;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = true;\n      // @ts-ignore\n      aboutBtn.disabled = true;\n      pauseResumeManager.pause(pikaVolley, PauseResumePrecedence.messageBox);\n      return;\n    }\n    if (isWinningScoreAlreadyReached(15)) {\n      winningScoreInNoticeBox1.textContent = '15';\n      noticeBox1.classList.remove('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = true;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = true;\n      // @ts-ignore\n      aboutBtn.disabled = true;\n      pauseResumeManager.pause(pikaVolley, PauseResumePrecedence.messageBox);\n      return;\n    }\n    applyAndSaveOptions({ winningScore: '15' });\n  });\n  noticeOKBtn1.addEventListener('click', () => {\n    if (!noticeBox1.classList.contains('hidden')) {\n      noticeBox1.classList.add('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = false;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = false;\n      // @ts-ignore\n      aboutBtn.disabled = false;\n      pauseResumeManager.resume(pikaVolley, PauseResumePrecedence.messageBox);\n    }\n  });\n  noticeOKBtn2.addEventListener('click', () => {\n    if (!noticeBox2.classList.contains('hidden')) {\n      noticeBox2.classList.add('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = false;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = false;\n      // @ts-ignore\n      aboutBtn.disabled = false;\n      pauseResumeManager.resume(pikaVolley, PauseResumePrecedence.messageBox);\n    }\n  });\n\n  const practiceModeOnBtn = document.getElementById('practice-mode-on-btn');\n  const practiceModeOffBtn = document.getElementById('practice-mode-off-btn');\n  practiceModeOnBtn.addEventListener('click', () => {\n    practiceModeOffBtn.classList.remove('selected');\n    practiceModeOnBtn.classList.add('selected');\n    pikaVolley.isPracticeMode = true;\n  });\n  practiceModeOffBtn.addEventListener('click', () => {\n    practiceModeOnBtn.classList.remove('selected');\n    practiceModeOffBtn.classList.add('selected');\n    pikaVolley.isPracticeMode = false;\n  });\n\n  const aboutBox = document.getElementById('about-box');\n  const closeAboutBtn = document.getElementById('close-about-btn');\n  aboutBtn.addEventListener('click', () => {\n    if (aboutBox.classList.contains('hidden')) {\n      aboutBox.classList.remove('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = true;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = true;\n      pauseResumeManager.pause(pikaVolley, PauseResumePrecedence.messageBox);\n    } else {\n      aboutBox.classList.add('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = false;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = false;\n      pauseResumeManager.resume(pikaVolley, PauseResumePrecedence.messageBox);\n    }\n  });\n  closeAboutBtn.addEventListener('click', () => {\n    if (!aboutBox.classList.contains('hidden')) {\n      aboutBox.classList.add('hidden');\n      // @ts-ignore\n      gameDropdownBtn.disabled = false;\n      // @ts-ignore\n      optionsDropdownBtn.disabled = false;\n      pauseResumeManager.resume(pikaVolley, PauseResumePrecedence.messageBox);\n    }\n  });\n\n  const resetToDefaultBtn = document.getElementById('reset-to-default-btn');\n  resetToDefaultBtn.addEventListener('click', () => {\n    // turn off practice mode\n    practiceModeOffBtn.click();\n\n    // and restore the reset options to default\n    const defaultOptions = {\n      graphic: 'sharp',\n      bgm: 'on',\n      sfx: 'stereo',\n      speed: 'medium',\n      winningScore: '15',\n    };\n    applyAndSaveOptions(defaultOptions);\n  });\n}\n\n/**\n * Set selected (checked) options btn fit to options\n * @param {Options} options\n */\nfunction setSelectedOptionsBtn(options) {\n  if (options.graphic) {\n    const graphicSharpBtn = document.getElementById('graphic-sharp-btn');\n    const graphicSoftBtn = document.getElementById('graphic-soft-btn');\n    switch (options.graphic) {\n      case 'sharp':\n        graphicSoftBtn.classList.remove('selected');\n        graphicSharpBtn.classList.add('selected');\n        break;\n      case 'soft':\n        graphicSharpBtn.classList.remove('selected');\n        graphicSoftBtn.classList.add('selected');\n        break;\n    }\n  }\n  if (options.bgm) {\n    const bgmOnBtn = document.getElementById('bgm-on-btn');\n    const bgmOffBtn = document.getElementById('bgm-off-btn');\n    switch (options.bgm) {\n      case 'on':\n        bgmOffBtn.classList.remove('selected');\n        bgmOnBtn.classList.add('selected');\n        break;\n      case 'off':\n        bgmOnBtn.classList.remove('selected');\n        bgmOffBtn.classList.add('selected');\n        break;\n    }\n  }\n  if (options.sfx) {\n    const stereoBtn = document.getElementById('stereo-btn');\n    const monoBtn = document.getElementById('mono-btn');\n    const sfxOffBtn = document.getElementById('sfx-off-btn');\n    switch (options.sfx) {\n      case 'stereo':\n        monoBtn.classList.remove('selected');\n        sfxOffBtn.classList.remove('selected');\n        stereoBtn.classList.add('selected');\n        break;\n      case 'mono':\n        sfxOffBtn.classList.remove('selected');\n        stereoBtn.classList.remove('selected');\n        monoBtn.classList.add('selected');\n        break;\n      case 'off':\n        stereoBtn.classList.remove('selected');\n        monoBtn.classList.remove('selected');\n        sfxOffBtn.classList.add('selected');\n        break;\n    }\n  }\n  if (options.speed) {\n    const slowSpeedBtn = document.getElementById('slow-speed-btn');\n    const mediumSpeedBtn = document.getElementById('medium-speed-btn');\n    const fastSpeedBtn = document.getElementById('fast-speed-btn');\n    switch (options.speed) {\n      case 'slow':\n        mediumSpeedBtn.classList.remove('selected');\n        fastSpeedBtn.classList.remove('selected');\n        slowSpeedBtn.classList.add('selected');\n        break;\n      case 'medium':\n        fastSpeedBtn.classList.remove('selected');\n        slowSpeedBtn.classList.remove('selected');\n        mediumSpeedBtn.classList.add('selected');\n        break;\n      case 'fast':\n        slowSpeedBtn.classList.remove('selected');\n        mediumSpeedBtn.classList.remove('selected');\n        fastSpeedBtn.classList.add('selected');\n        break;\n    }\n  }\n  if (options.winningScore) {\n    const winningScore5Btn = document.getElementById('winning-score-5-btn');\n    const winningScore10Btn = document.getElementById('winning-score-10-btn');\n    const winningScore15Btn = document.getElementById('winning-score-15-btn');\n    switch (options.winningScore) {\n      case '5':\n        winningScore10Btn.classList.remove('selected');\n        winningScore15Btn.classList.remove('selected');\n        winningScore5Btn.classList.add('selected');\n        break;\n      case '10':\n        winningScore15Btn.classList.remove('selected');\n        winningScore5Btn.classList.remove('selected');\n        winningScore10Btn.classList.add('selected');\n        break;\n      case '15':\n        winningScore5Btn.classList.remove('selected');\n        winningScore10Btn.classList.remove('selected');\n        winningScore15Btn.classList.add('selected');\n        break;\n    }\n  }\n}\n\n/**\n * Attach event listeners to show dropdowns and submenus properly\n * @param {PikachuVolleyball} pikaVolley\n */\nfunction setUpToShowDropdownsAndSubmenus(pikaVolley) {\n  // hide dropdowns and submenus if the user clicks outside of these\n  window.addEventListener('click', (event) => {\n    // @ts-ignore\n    if (!event.target.matches('.dropdown-btn, .submenu-btn')) {\n      hideSubmenus();\n      hideDropdownsExcept('');\n      pauseResumeManager.resume(pikaVolley, PauseResumePrecedence.dropdown);\n    }\n  });\n\n  // set up to show dropdowns\n  document.getElementById('game-dropdown-btn').addEventListener('click', () => {\n    toggleDropdown('game-dropdown', pikaVolley);\n  });\n  document\n    .getElementById('options-dropdown-btn')\n    .addEventListener('click', () => {\n      toggleDropdown('options-dropdown', pikaVolley);\n    });\n\n  // set up to show submenus on mouseover event\n  document\n    .getElementById('graphic-submenu-btn')\n    .addEventListener('mouseover', () => {\n      showSubmenu('graphic-submenu-btn', 'graphic-submenu');\n    });\n  document\n    .getElementById('bgm-submenu-btn')\n    .addEventListener('mouseover', () => {\n      showSubmenu('bgm-submenu-btn', 'bgm-submenu');\n    });\n  document\n    .getElementById('sfx-submenu-btn')\n    .addEventListener('mouseover', () => {\n      showSubmenu('sfx-submenu-btn', 'sfx-submenu');\n    });\n  document\n    .getElementById('speed-submenu-btn')\n    .addEventListener('mouseover', () => {\n      showSubmenu('speed-submenu-btn', 'speed-submenu');\n    });\n  document\n    .getElementById('winning-score-submenu-btn')\n    .addEventListener('mouseover', () => {\n      showSubmenu('winning-score-submenu-btn', 'winning-score-submenu');\n    });\n  document\n    .getElementById('practice-mode-submenu-btn')\n    .addEventListener('mouseover', () => {\n      showSubmenu('practice-mode-submenu-btn', 'practice-mode-submenu');\n    });\n  document\n    .getElementById('reset-to-default-btn')\n    .addEventListener('mouseover', () => {\n      hideSubmenus();\n    });\n\n  // set up to show submenus on click event\n  // (it is for touch device equipped with physical keyboard)\n  document.getElementById('bgm-submenu-btn').addEventListener('click', () => {\n    showSubmenu('bgm-submenu-btn', 'bgm-submenu');\n  });\n  document.getElementById('sfx-submenu-btn').addEventListener('click', () => {\n    showSubmenu('sfx-submenu-btn', 'sfx-submenu');\n  });\n  document.getElementById('speed-submenu-btn').addEventListener('click', () => {\n    showSubmenu('speed-submenu-btn', 'speed-submenu');\n  });\n  document\n    .getElementById('winning-score-submenu-btn')\n    .addEventListener('click', () => {\n      showSubmenu('winning-score-submenu-btn', 'winning-score-submenu');\n    });\n  document\n    .getElementById('practice-mode-submenu-btn')\n    .addEventListener('click', () => {\n      showSubmenu('practice-mode-submenu-btn', 'practice-mode-submenu');\n    });\n  document\n    .getElementById('reset-to-default-btn')\n    .addEventListener('click', () => {\n      hideSubmenus();\n    });\n}\n\n/**\n * Toggle (show or hide) the dropdown menu\n * @param {string} dropdownID html element id of the dropdown to toggle\n * @param {PikachuVolleyball} pikaVolley\n */\nfunction toggleDropdown(dropdownID, pikaVolley) {\n  hideSubmenus();\n  hideDropdownsExcept(dropdownID);\n  const willShow = document.getElementById(dropdownID).classList.toggle('show');\n  if (willShow) {\n    pauseResumeManager.pause(pikaVolley, PauseResumePrecedence.dropdown);\n  } else {\n    pauseResumeManager.resume(pikaVolley, PauseResumePrecedence.dropdown);\n  }\n}\n\n/**\n * Show the submenu\n * @param {string} submenuBtnID html element id of the submenu button whose submenu to show\n * @param {string} subMenuID html element id of the submenu to show\n */\nfunction showSubmenu(submenuBtnID, subMenuID) {\n  hideSubmenus();\n  document.getElementById(submenuBtnID).classList.add('open');\n  document.getElementById(subMenuID).classList.add('show');\n}\n\n/**\n * Hide all other dropdowns except the dropdown\n * @param {string} dropdownID html element id of the dropdown\n */\nfunction hideDropdownsExcept(dropdownID) {\n  const dropdowns = document.getElementsByClassName('dropdown');\n  for (let i = 0; i < dropdowns.length; i++) {\n    if (dropdowns[i].id !== dropdownID) {\n      dropdowns[i].classList.remove('show');\n    }\n  }\n}\n\n/**\n * Hide all submenus\n */\nfunction hideSubmenus() {\n  const submenus = document.getElementsByClassName('submenu');\n  for (let i = 0; i < submenus.length; i++) {\n    submenus[i].classList.remove('show');\n  }\n  const submenuBtns = document.getElementsByClassName('submenu-btn');\n  for (let i = 0; i < submenuBtns.length; i++) {\n    submenuBtns[i].classList.remove('open');\n  }\n}\n","/**\n * This is the main script which executes the game.\n * General explanations for the all source code files of the game are following.\n *\n ********************************************************************************************************************\n * This web version of the Pikachu Volleyball is made by\n * reverse engineering the core part of the original Pikachu Volleyball game\n * which is developed by \"1997 (C) SACHI SOFT / SAWAYAKAN Programmers\" & \"1997 (C) Satoshi Takenouchi\".\n *\n * \"physics.js\", \"cloud_and_wave.js\", and some codes in \"view.js\" are the results of this reverse engineering.\n * Refer to the comments in each file for the machine code addresses of the original functions.\n ********************************************************************************************************************\n *\n * This web version game is mainly composed of three parts which follows MVC pattern.\n *  1) \"physics.js\" (Model): The physics engine which takes charge of the dynamics of the ball and the players (Pikachus).\n *                           It is gained by reverse engineering the machine code of the original game.\n *  2) \"view.js\" (View): The rendering part of the game which depends on pixi.js (https://www.pixijs.com/, https://github.com/pixijs/pixi.js) library.\n *                       Some codes in this part is gained by reverse engineering the original machine code.\n *  3) \"pikavolley.js\" (Controller): Make the game work by controlling the Model and the View according to the user input.\n *\n * And explanations for other source files are below.\n *  - \"cloud_and_wave.js\": This is also a Model part which takes charge of the clouds and wave motion in the game. Of course, it is also rendered by \"view.js\".\n *                         It is also gained by reverse engineering the original machine code.\n *  - \"keyboard.js\": Support the Controller(\"pikavolley.js\") to get a user input via keyboard.\n *  - \"audio.js\": The game audio or sounds. It depends on pixi-sound (https://github.com/pixijs/pixi-sound) library.\n *  - \"rand.js\": For the random function used in the Models (\"physics.js\", \"cloud_and_wave.js\").\n *  - \"assets_path.js\": For the assets (image files, sound files) locations.\n *  - \"ui.js\": For the user interface (menu bar, buttons etc.) of the html page.\n */\n'use strict';\nimport { settings } from '@pixi/settings';\nimport { SCALE_MODES } from '@pixi/constants';\nimport { Renderer, BatchRenderer, autoDetectRenderer } from '@pixi/core';\nimport { Prepare } from '@pixi/prepare';\nimport { Container } from '@pixi/display';\nimport { Loader } from '@pixi/loaders';\nimport { SpritesheetLoader } from '@pixi/spritesheet';\nimport { Ticker } from '@pixi/ticker';\nimport { CanvasRenderer } from '@pixi/canvas-renderer';\nimport { CanvasSpriteRenderer } from '@pixi/canvas-sprite';\nimport { CanvasPrepare } from '@pixi/canvas-prepare';\nimport '@pixi/canvas-display';\nimport { PikachuVolleyball } from './pikavolley.js';\nimport { ASSETS_PATH } from './assets_path.js';\nimport { setUpUI } from './ui.js';\n\n// Reference for how to use Renderer.registerPlugin:\n// https://github.com/pixijs/pixijs/blob/af3c0c6bb15aeb1049178c972e4a14bb4cabfce4/bundles/pixi.js/src/index.ts#L27-L34\nRenderer.registerPlugin('prepare', Prepare);\nRenderer.registerPlugin('batch', BatchRenderer);\n// Reference for how to use CanvasRenderer.registerPlugin:\n// https://github.com/pixijs/pixijs/blob/af3c0c6bb15aeb1049178c972e4a14bb4cabfce4/bundles/pixi.js-legacy/src/index.ts#L13-L19\nCanvasRenderer.registerPlugin('prepare', CanvasPrepare);\nCanvasRenderer.registerPlugin('sprite', CanvasSpriteRenderer);\nLoader.registerPlugin(SpritesheetLoader);\n\n// Set settings.RESOLUTION to 2 instead of 1 to make the game screen do not look\n// much blurry in case of the image rendering mode of 'image-rendering: auto',\n// which is like bilinear interpolation, which is used in \"soft\" game graphic option.\nsettings.RESOLUTION = 2;\nsettings.SCALE_MODE = SCALE_MODES.NEAREST;\nsettings.ROUND_PIXELS = true;\n\nconst renderer = autoDetectRenderer({\n  width: 432,\n  height: 304,\n  antialias: false,\n  backgroundColor: 0x000000,\n  backgroundAlpha: 1,\n  // Decided to use only Canvas for compatibility reason. One player had reported that\n  // on their browser, where pixi chooses to use WebGL renderer, the graphics are not fine.\n  // And the issue had been fixed by using Canvas renderer. And also for the sake of testing,\n  // it is more comfortable just to stick with Canvas renderer so that it is unnecessary to switch\n  // between WebGL renderer and Canvas renderer.\n  forceCanvas: true,\n});\n\nconst stage = new Container();\nconst ticker = new Ticker();\nconst loader = new Loader();\n\nrenderer.view.setAttribute('id', 'game-canvas');\ndocument.getElementById('game-canvas-container').appendChild(renderer.view);\nrenderer.render(stage); // To make the initial canvas painting stable in the Firefox browser.\n\nloader.add(ASSETS_PATH.SPRITE_SHEET);\nfor (const prop in ASSETS_PATH.SOUNDS) {\n  loader.add(ASSETS_PATH.SOUNDS[prop]);\n}\nsetUpInitialUI();\n\n/**\n * Set up the initial UI.\n */\nfunction setUpInitialUI() {\n  const loadingBox = document.getElementById('loading-box');\n  const progressBar = document.getElementById('progress-bar');\n  loader.onProgress.add(() => {\n    progressBar.style.width = `${loader.progress}%`;\n  });\n  loader.onComplete.add(() => {\n    loadingBox.classList.add('hidden');\n  });\n\n  const aboutBox = document.getElementById('about-box');\n  const aboutBtn = document.getElementById('about-btn');\n  const closeAboutBtn = document.getElementById('close-about-btn');\n  const gameDropdownBtn = document.getElementById('game-dropdown-btn');\n  const optionsDropdownBtn = document.getElementById('options-dropdown-btn');\n  // @ts-ignore\n  gameDropdownBtn.disabled = true;\n  // @ts-ignore\n  optionsDropdownBtn.disabled = true;\n  const closeAboutBox = () => {\n    if (!aboutBox.classList.contains('hidden')) {\n      aboutBox.classList.add('hidden');\n      // @ts-ignore\n      aboutBtn.disabled = true;\n    }\n    aboutBtn.getElementsByClassName('text-play')[0].classList.add('hidden');\n    aboutBtn.getElementsByClassName('text-about')[0].classList.remove('hidden');\n    aboutBtn.classList.remove('glow');\n    closeAboutBtn\n      .getElementsByClassName('text-play')[0]\n      .classList.add('hidden');\n    closeAboutBtn\n      .getElementsByClassName('text-close')[0]\n      .classList.remove('hidden');\n    closeAboutBtn.classList.remove('glow');\n\n    loader.load(setup); // setup is called after loader finishes loading\n    loadingBox.classList.remove('hidden');\n    aboutBtn.removeEventListener('click', closeAboutBox);\n    closeAboutBtn.removeEventListener('click', closeAboutBox);\n  };\n  aboutBtn.addEventListener('click', closeAboutBox);\n  closeAboutBtn.addEventListener('click', closeAboutBox);\n}\n\n/**\n * Set up the game and the full UI, and start the game.\n */\nfunction setup() {\n  const pikaVolley = new PikachuVolleyball(stage, loader.resources);\n  setUpUI(pikaVolley, ticker);\n  start(pikaVolley);\n}\n\n/**\n * Start the game.\n * @param {PikachuVolleyball} pikaVolley\n */\nfunction start(pikaVolley) {\n  ticker.maxFPS = pikaVolley.normalFPS;\n  ticker.add(() => {\n    pikaVolley.gameLoop();\n    renderer.render(stage);\n  });\n  ticker.start();\n}\n","export const localStorageWrapper = {\n  /**\n   * Get value corresponding to the key from localStorage\n   * @param {string} key\n   * @returns {string|null}\n   */\n  get: (key) => {\n    let value = null;\n    try {\n      value = localStorage.getItem(key);\n    } catch (err) {\n      console.error(err);\n    }\n    return value;\n  },\n\n  /*\n   * Set key-value pair to the localStorage\n   * @param {string} key\n   * @param {string} value\n   */\n  set: (key, value) => {\n    try {\n      localStorage.setItem(key, value);\n    } catch (err) {\n      console.error(err);\n    }\n  },\n};\n"],"names":["c","a","b","d","XMLHttpRequest","open","responseType","onload","g","response","onerror","console","error","send","status","e","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","navigator","test","userAgent","saveAs","HTMLAnchorElement","prototype","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","type","Blob","title","body","innerText","HTMLElement","safari","FileReader","k","onloadend","result","replace","readAsDataURL","l","m","module","exports","replaySaver","constructor","this","frameCounter","roomID","nicknames","partialPublicIPs","inputs","options","speed","winningScore","chats","recordRoomID","recordNicknames","roomCreatorNickname","roomJoinerNickname","recordPartialPublicIPs","roomCreatorPartialPublicIP","roomJoinerPartialPublicIP","recordInputs","player1Input","player2Input","usersInputNumber","push","cleanRecord","recordOptions","recordChats","chatMessage","whichPlayerSide","saveAsFile","pack","version","hash","serialize","packWithComment","_comment","blob","JSON","stringify","Date","filename","getFullYear","getMonth","slice","getDate","getHours","getMinutes","pauseResumeManager","_precedence","pause","pikaVolley","precedence","paused","resume","setSelectedOptionsBtn","graphic","graphicSharpBtn","getElementById","graphicSoftBtn","classList","remove","add","bgm","bgmOnBtn","bgmOffBtn","sfx","stereoBtn","monoBtn","sfxOffBtn","slowSpeedBtn","mediumSpeedBtn","fastSpeedBtn","winningScore5Btn","winningScore10Btn","winningScore15Btn","toggleDropdown","dropdownID","hideSubmenus","hideDropdownsExcept","toggle","showSubmenu","submenuBtnID","subMenuID","dropdowns","getElementsByClassName","length","id","submenus","submenuBtns","registerPlugin","settings","RESOLUTION","SCALE_MODE","NEAREST","ROUND_PIXELS","renderer","width","height","antialias","backgroundColor","backgroundAlpha","forceCanvas","stage","loader","view","setAttribute","appendChild","render","SPRITE_SHEET","prop","SOUNDS","setup","resources","ticker","applyOptions","audio","turnBGMVolume","turnSFXVolume","isStereoSound","normalFPS","maxFPS","addEventListener","get","applyAndSaveOptions","gameDropdownBtn","optionsDropdownBtn","aboutBtn","text","textContent","clipboard","writeText","then","alert","catch","prompt","disabled","pauseBtn","contains","restart","noticeBox1","noticeOKBtn1","winningScoreInNoticeBox1","isWinningScoreAlreadyReached","state","round","afterEndOfRound","beforeStartOfNextRound","scores","noticeBox2","noticeOKBtn2","isPracticeMode","practiceModeOnBtn","practiceModeOffBtn","aboutBox","closeAboutBtn","click","setUpBtns","set","saveOptions","event","matches","setUpToShowDropdownsAndSubmenus","code","menuBar","preventDefault","visibilityState","unmuteAll","muteAll","setUpUI","gameLoop","start","loadingBox","progressBar","onProgress","style","progress","onComplete","closeAboutBox","load","removeEventListener","setUpInitialUI","localStorageWrapper","key","value","localStorage","getItem","err","setItem"],"sourceRoot":""}